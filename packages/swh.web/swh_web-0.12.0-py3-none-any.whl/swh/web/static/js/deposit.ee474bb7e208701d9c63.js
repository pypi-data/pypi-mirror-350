/*! For license information please see deposit.ee474bb7e208701d9c63.js.LICENSE.txt */
try{let t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="5b157045-ebf3-4ffc-9506-3a884a373af3",t._sentryDebugIdIdentifier="sentry-dbid-5b157045-ebf3-4ffc-9506-3a884a373af3")}catch(t){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"0.12.0"};!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.swh=e():(t.swh=t.swh||{},t.swh.deposit=e())}(self,(function(){return function(){var t={4633:function(t,e,n){var r=n(73738).default;function o(){"use strict";t.exports=o=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},i=Object.prototype,a=i.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(t,e,n,r){return Object.defineProperty(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r})}try{f({},"")}catch(e){f=function(t,e,n){return t[e]=n}}function d(t,n,r,o){var i=n&&n.prototype instanceof m?n:m,a=Object.create(i.prototype);return f(a,"_invoke",function(t,n,r){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=S(s,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===o)throw o=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=3;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?4:2,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=4,r.method="throw",r.arg=u.arg)}}}(t,r,new T(o||[])),!0),a}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=d;var h={};function m(){}function g(){}function y(){}var v={};f(v,c,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(C([])));b&&b!==i&&a.call(b,c)&&(v=b);var x=y.prototype=m.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(o,i,s,c){var u=p(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==r(f)&&a.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,c)}))}c(u.arg)}var o;f(this,"_invoke",(function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function S(t,n){var r=n.method,o=t.i[r];if(o===e)return n.delegate=null,"throw"===r&&t.i.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=p(o,t.i,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.r]=a.value,n.next=t.n,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function O(t){this.tryEntries.push(t)}function j(t){var n=t[4]||{};n.type="normal",n.arg=e,t[4]=n}function T(t){this.tryEntries=[[-1]],t.forEach(O,this),this.reset(!0)}function C(t){if(null!=t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(a.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(r(t)+" is not iterable")}return g.prototype=y,f(x,"constructor",y),f(y,"constructor",g),g.displayName=f(y,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},n.awrap=function(t){return{__await:t}},_(E.prototype),f(E.prototype,u,(function(){return this})),n.AsyncIterator=E,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new E(d(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(x),f(x,l,"Generator"),f(x,c,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}},n.values=C,T.prototype={constructor:T,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e){a.type="throw",a.arg=t,n.next=e}for(var o=n.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return r("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,r(c),!0;if(s<u)return r(u),!1}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var o=r;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[2]===t)return this.complete(n[4],n[3]),j(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]===t){var r=n[4];if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={i:C(t),r:n,n:r},"next"===this.method&&(this.arg=e),h}},n}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},8545:function(t,e,n){"use strict";n.d(e,{Eb:function(){return o},jt:function(){return i},lY:function(){return r}});n(54756),n(18987);function r(t){return"/static/"+t}function o(t){return new Date(t).toLocaleString()}function i(t,e,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=""),"display"===e&&t){var o=encodeURI(t);r||(r=o);var i="";return n&&(i='target="_blank" rel="noopener noreferrer"'),'<a href="'+o+'" '+i+">"+r+"</a>"}return t}},16099:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(n(86308));function i(t){if(!t.options.indentation&&!t.options.lineSeparator)return;let e;for(t.content+=t.options.lineSeparator,e=0;e<t.level;e++)t.content+=t.options.indentation}function a(t,e){t.content+=e}function s(t,e,n){if("string"==typeof t.content)!function(t,e,n){if(!n){const n=t.trim();(e.options.lineSeparator||0===n.length)&&(t=n)}t.length>0&&(!n&&e.content.length>0&&i(e),a(e,t))}(t.content,e,n);else if("Element"===t.type)!function(t,e,n){e.path.push(t.name),!n&&e.content.length>0&&i(e);if(a(e,"<"+t.name),c(e,t.attributes),null===t.children||e.options.forceSelfClosingEmptyTag&&0===t.children.length){const t=e.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";a(e,t)}else if(0===t.children.length)a(e,"></"+t.name+">");else{const r=t.children;a(e,">"),e.level++;let o="preserve"===t.attributes["xml:space"]||n,c=!1;if(!o&&e.options.ignoredPaths&&(c=function(t,e){const n="/"+t.join("/"),r=t[t.length-1];return e.includes(r)||e.includes(n)}(e.path,e.options.ignoredPaths),o=c),!o&&e.options.collapseContent){let t=!1,e=!1,i=!1;r.forEach((function(o,a){"Text"===o.type?(o.content.includes("\n")?(e=!0,o.content=o.content.trim()):0!==a&&a!==r.length-1||n||0===o.content.trim().length&&(o.content=""),(o.content.trim().length>0||1===r.length)&&(t=!0)):"CDATA"===o.type?t=!0:i=!0})),!t||i&&e||(o=!0)}r.forEach((function(t){s(t,e,n||o)})),e.level--,n||o||i(e),c&&function(t){let e;for(t.content=t.content.replace(/ +$/,""),e=0;e<t.level;e++)t.content+=t.options.indentation}(e),a(e,"</"+t.name+">")}e.path.pop()}(t,e,n);else{if("ProcessingInstruction"!==t.type)throw new Error("Unknown node type: "+t.type);u(t,e)}}function c(t,e){Object.keys(e).forEach((function(n){const r=e[n].replace(/"/g,"&quot;");a(t," "+n+'="'+r+'"')}))}function u(t,e){e.content.length>0&&i(e),a(e,"<?"+t.name),c(e,t.attributes),a(e,"?>")}function l(t,e={}){e.indentation="indentation"in e?e.indentation:"    ",e.collapseContent=!0===e.collapseContent,e.lineSeparator="lineSeparator"in e?e.lineSeparator:"\r\n",e.whiteSpaceAtEndOfSelfclosingTag=!0===e.whiteSpaceAtEndOfSelfclosingTag,e.throwOnFailure=!1!==e.throwOnFailure;try{const n=(0,o.default)(t,{filter:e.filter,strictMode:e.strictMode}),r={content:"",level:0,options:e,path:[]};return n.declaration&&u(n.declaration,r),n.children.forEach((function(t){s(t,r,!1)})),e.lineSeparator?r.content.replace(/\r\n/g,"\n").replace(/\n/g,e.lineSeparator):r.content}catch(n){if(e.throwOnFailure)throw n;return t}}l.minify=(t,e={})=>l(t,Object.assign(Object.assign({},e),{indentation:"",lineSeparator:""})),t.exports=l,e.default=l},18987:function(t,e,n){"use strict";function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}(function t(e,n){function o(t,o,i){if("undefined"!=typeof document){"number"==typeof(i=r({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=t+"="+e.write(o,t)+a}}return Object.create({set:o,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(r[s]=e.read(a,s),t===s)break}catch(t){}}return t?r[t]:r}},remove:function(t,e){o(t,"",r({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,r({},this.attributes,e))},withConverter:function(e){return t(r({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})})({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},23717:function(t,e,n){"use strict";n.d(e,{_k:function(){return r}});var r={serverSide:!0,processing:!0,language:{processing:'<img src="'+(0,n(8545).lY)("img/swh-spinner.gif")+'"></img>'},fixedHeader:!0,lengthMenu:[10,25,50,100,1e3],scrollCollapse:!0,searchDelay:1e3}},54756:function(t,e,n){var r=n(4633)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},58168:function(t,e,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(null,arguments)}n.d(e,{A:function(){return r}})},73738:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},86308:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParsingError=void 0;class n extends Error{constructor(t,e){super(t),this.cause=e}}let r;function o(){return s(!1)||function(){const t=l(/^([^<]+)/);if(t){const e={type:"Text",content:t[1]};return{excluded:!1===r.options.filter(e),node:e}}}()||c()||function(){if(r.xml.startsWith("<![CDATA[")){const t=r.xml.indexOf("]]>");if(t>-1){const e=t+3,n={type:"CDATA",content:r.xml.substring(0,e)};return r.xml=r.xml.slice(e),{excluded:!1===r.options.filter(n),node:n}}}}()||a(!1)}function i(){return l(/\s*/),s(!0)||c()||function(){const t=l(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||l(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||l(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||l(/^<!DOCTYPE\s+\S+\s*>/);if(t){const e={type:"DocumentType",content:t[0]};return{excluded:!1===r.options.filter(e),node:e}}}()||a(!1)}function a(t){const e=l(t?/^<\?(xml(-stylesheet)?)\s*/:/^<\?([\w-:.]+)\s*/);if(!e)return;const n={name:e[1],type:"ProcessingInstruction",attributes:{}};for(;!f()&&!d("?>");){const t=u();if(!t)return;n.attributes[t.name]=t.value}return l(/\?>/),{excluded:!t&&!1===r.options.filter(n),node:n}}function s(t){const e=l(/^<([^?!</>\s]+)\s*/);if(!e)return;const i={type:"Element",name:e[1],attributes:{},children:[]},a=!t&&!1===r.options.filter(i);for(;!(f()||d(">")||d("?>")||d("/>"));){const t=u();if(!t)return;i.attributes[t.name]=t.value}if(l(/^\s*\/>/))return i.children=null,{excluded:a,node:i};l(/\??>/);let s=o();for(;s;)s.excluded||i.children.push(s.node),s=o();if(r.options.strictMode){const t=`</${i.name}>`;if(!r.xml.startsWith(t))throw new n("Failed to parse XML",`Closing tag not matching "${t}"`);r.xml=r.xml.slice(t.length)}else l(/^<\/[\w-:.\u00C0-\u00FF]+\s*>/);return{excluded:a,node:i}}function c(){const t=l(/^<!--[\s\S]*?-->/);if(t){const e={type:"Comment",content:t[0]};return{excluded:!1===r.options.filter(e),node:e}}}function u(){const t=l(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(t)return{name:t[1].trim(),value:(e=t[2].trim(),e.replace(/^['"]|['"]$/g,""))};var e}function l(t){const e=r.xml.match(t);if(e)return r.xml=r.xml.slice(e[0].length),e}function f(){return 0===r.xml.length}function d(t){return 0===r.xml.indexOf(t)}function p(t,e={}){t=t.trim();const o=e.filter||(()=>!0);return r={xml:t,options:Object.assign(Object.assign({},e),{filter:o,strictMode:!0===e.strictMode})},function(){const t=a(!0),e=[];let o,s=i();for(;s;){if("Element"===s.node.type){if(o)throw new Error("Found multiple root nodes");o=s.node}s.excluded||e.push(s.node),s=i()}if(!o)throw new n("Failed to parse XML","Root Element not found");if(0!==r.xml.length)throw new n("Failed to parse XML","Not Well-Formed XML");return{declaration:t?t.node:null,root:o,children:e}}()}e.ParsingError=n,t.exports=p,e.default=p}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return function(){"use strict";n.r(r),n.d(r,{initDepositAdmin:function(){return c}});var t=n(58168),e=n(16099),o=n.n(e),i=n(8545),a=n(23717);function s(t,e,n){if(void 0===n&&(n=""),"display"===e&&t&&t.startsWith("swh")){var r=Urls.browse_swhid(t),o=t.replace(/;/g,";<br/>");return n||(n=o),'<a href="'+r+'">'+n+"</a>"}return t}function c(e,n){var r;$(document).ready((function(){$.fn.dataTable.ext.errMode="none",r=$("#swh-admin-deposit-list").on("error.dt",(function(t,e,n,r){$("#swh-admin-deposit-list-error").text(r)})).DataTable((0,t.A)({},a._k,{dom:'<<"d-flex justify-content-between align-items-center"f<"#list-exclude">l>rt<"row mt-2"<"col-sm-5"i><"col-sm-7"p>>',ajax:{url:Urls.admin_deposit_list(),data:function(t){t.excludePattern=$("#swh-admin-deposit-list-exclude-filter").val()}},columns:[{data:"id",name:"id"},{data:"type",name:"type"},{data:"uri",name:"uri",render:function(t,e,n){var r=$.fn.dataTable.render.text().display(t),o="",a="";return n.swhid_context&&t?o=s(n.swhid_context,e,r):t&&(o=r),t&&(a=(0,i.jt)(r,e,!0,'<i class="mdi mdi-open-in-new" aria-hidden="true"></i>')),o+"&nbsp;"+a}},{data:"reception_date",name:"reception_date",render:i.Eb},{data:"status",name:"status"},{data:"raw_metadata",name:"raw_metadata",render:function(t,e,n){return"display"===e&&n.raw_metadata?'<button class="btn btn-secondary metadata">display</button>':t}},{data:"status_detail",name:"status_detail",render:function(t,e,n){if("display"===e&&t){var r=t;return"object"==typeof t&&(r=JSON.stringify(t,null,4)),'<div style="width: 200px; white-space: pre; overflow-x: auto;">'+r+"</div>"}return t},orderable:!1,visible:!1},{data:"swhid",name:"swhid",render:function(t,e,n){return s(t,e)},orderable:!1,visible:!1},{data:"swhid_context",name:"swhid_context",render:function(t,e,n){return s(t,e)},orderable:!1,visible:!1}],scrollX:!0,order:[[0,"desc"]]})),$("div#list-exclude").html('\n      <div id="swh-admin-deposit-list-exclude-div-wrapper" class="dataTables_filter">\n        <label for="swh-admin-deposit-list-exclude-filter">\n          Exclude:\n        </label>\n        <input id="swh-admin-deposit-list-exclude-filter"\n              type="search"\n              value="check-deposit"\n              class="form-control form-control-sm mb-2"\n              placeholder="exclude-pattern" aria-controls="swh-admin-deposit-list">\n        </input>\n      </div>'),$("#swh-admin-deposit-list tbody").on("click","tr button.metadata",(function(){var t=r.row(this.parentNode.parentNode).data(),e=o()(t.raw_metadata,{indentation:"  ",collapseContent:!0,lineSeparator:"\n"}),n=$("<div/>").text(e).html();swh.webapp.showModalHtml("Metadata of deposit "+t.id,'<pre style="max-height: 75vh;"><code class="xml">'+n+"</code></pre>","90%"),swh.webapp.highlightCode()})),$("#swh-admin-deposit-list-exclude-filter").keyup((function(){r.draw()})),r.draw()})),$("a.toggle-col").on("click",(function(t){t.preventDefault();var e=r.column($(this).attr("data-column"));e.visible(!e.visible()),e.visible()?$(this).removeClass("col-hidden"):$(this).addClass("col-hidden")}))}}(),r}()}));
//# sourceMappingURL=deposit.ee474bb7e208701d9c63.js.map