/*! For license information please see 139.22a0c8271bdca0279090.js.LICENSE.txt */
"use strict";(self.webpackChunkjupyter_ruff=self.webpackChunkjupyter_ruff||[]).push([[139],{139:(e,t,n)=>{n.r(t),n.d(t,{TomlDate:()=>u,TomlError:()=>r,default:()=>N,parse:()=>x,stringify:()=>E});class r extends Error{line;column;codeblock;constructor(e,t){const[n,r]=function(e,t){let n=e.slice(0,t).split(/\r\n|\n|\r/g);return[n.length,n.pop().length+1]}(t.toml,t.ptr),i=function(e,t,n){let r=e.split(/\r\n|\n|\r/g),i="",l=1+(0|Math.log10(t+1));for(let e=t-1;e<=t+1;e++){let o=r[e-1];o&&(i+=e.toString().padEnd(l," "),i+=":  ",i+=o,i+="\n",e===t&&(i+=" ".repeat(l+n+2),i+="^\n"))}return i}(t.toml,n,r);super(`Invalid TOML document: ${e}\n\n${i}`,t),this.line=n,this.column=r,this.codeblock=i}}function i(e,t=0,n=e.length){let r=e.indexOf("\n",t);return"\r"===e[r-1]&&r--,r<=n?r:-1}function l(e,t){for(let n=t;n<e.length;n++){let i=e[n];if("\n"===i)return n;if("\r"===i&&"\n"===e[n+1])return n+1;if(i<" "&&"\t"!==i||""===i)throw new r("control characters are not allowed in comments",{toml:e,ptr:t})}return e.length}function o(e,t,n,r){let i;for(;" "===(i=e[t])||"\t"===i||!n&&("\n"===i||"\r"===i&&"\n"===e[t+1]);)t++;return r||"#"!==i?t:o(e,l(e,t),n)}function f(e,t,n,l,o=!1){if(!l)return(t=i(e,t))<0?e.length:t;for(let r=t;r<e.length;r++){let t=e[r];if("#"===t)r=i(e,r);else{if(t===n)return r+1;if(t===l||o&&("\n"===t||"\r"===t&&"\n"===e[r+1]))return r}}throw new r("cannot find end of structure",{toml:e,ptr:t})}function a(e,t){let n=e[t],r=n===e[t+1]&&e[t+1]===e[t+2]?e.slice(t,t+3):n;t+=r.length-1;do{t=e.indexOf(r,++t)}while(t>-1&&"'"!==n&&"\\"===e[t-1]&&("\\"!==e[t-2]||"\\"===e[t-3]));return t>-1&&(t+=r.length,r.length>1&&(e[t]===n&&t++,e[t]===n&&t++)),t}let s=/^(\d{4}-\d{2}-\d{2})?[T ]?(?:(\d{2}):\d{2}:\d{2}(?:\.\d+)?)?(Z|[-+]\d{2}:\d{2})?$/i;class u extends Date{#e=!1;#t=!1;#n=null;constructor(e){let t=!0,n=!0,r="Z";if("string"==typeof e){let i=e.match(s);i?(i[1]||(t=!1,e=`0000-01-01T${e}`),n=!!i[2],n&&" "===e[10]&&(e=e.replace(" ","T")),i[2]&&+i[2]>23?e="":(r=i[3]||null,e=e.toUpperCase(),!r&&n&&(e+="Z"))):e=""}super(e),isNaN(this.getTime())||(this.#e=t,this.#t=n,this.#n=r)}isDateTime(){return this.#e&&this.#t}isLocal(){return!this.#e||!this.#t||!this.#n}isDate(){return this.#e&&!this.#t}isTime(){return this.#t&&!this.#e}isValid(){return this.#e||this.#t}toISOString(){let e=super.toISOString();if(this.isDate())return e.slice(0,10);if(this.isTime())return e.slice(11,23);if(null===this.#n)return e.slice(0,-1);if("Z"===this.#n)return e;let t=60*+this.#n.slice(1,3)+ +this.#n.slice(4,6);return t="-"===this.#n[0]?t:-t,new Date(this.getTime()-6e4*t).toISOString().slice(0,-1)+this.#n}static wrapAsOffsetDateTime(e,t="Z"){let n=new u(e);return n.#n=t,n}static wrapAsLocalDateTime(e){let t=new u(e);return t.#n=null,t}static wrapAsLocalDate(e){let t=new u(e);return t.#t=!1,t.#n=null,t}static wrapAsLocalTime(e){let t=new u(e);return t.#e=!1,t.#n=null,t}}let c=/^((0x[0-9a-fA-F](_?[0-9a-fA-F])*)|(([+-]|0[ob])?\d(_?\d)*))$/,d=/^[+-]?\d(_?\d)*(\.\d(_?\d)*)?([eE][+-]?\d(_?\d)*)?$/,h=/^[+-]?0[0-9_]/,w=/^[0-9a-f]{4,8}$/i,m={b:"\b",t:"\t",n:"\n",f:"\f",r:"\r",'"':'"',"\\":"\\"};function p(e,t=0,n=e.length){let i="'"===e[t],l=e[t++]===e[t]&&e[t]===e[t+1];l&&(n-=2,"\r"===e[t+=2]&&t++,"\n"===e[t]&&t++);let f,a=0,s="",u=t;for(;t<n-1;){let n=e[t++];if("\n"===n||"\r"===n&&"\n"===e[t]){if(!l)throw new r("newlines are not allowed in strings",{toml:e,ptr:t-1})}else if(n<" "&&"\t"!==n||""===n)throw new r("control characters are not allowed in strings",{toml:e,ptr:t-1});if(f){if(f=!1,"u"===n||"U"===n){let i=e.slice(t,t+="u"===n?4:8);if(!w.test(i))throw new r("invalid unicode escape",{toml:e,ptr:a});try{s+=String.fromCodePoint(parseInt(i,16))}catch{throw new r("invalid unicode escape",{toml:e,ptr:a})}}else if(!l||"\n"!==n&&" "!==n&&"\t"!==n&&"\r"!==n){if(!(n in m))throw new r("unrecognized escape sequence",{toml:e,ptr:a});s+=m[n]}else{if("\n"!==e[t=o(e,t-1,!0)]&&"\r"!==e[t])throw new r("invalid escape: only line-ending whitespace may be escaped",{toml:e,ptr:a});t=o(e,t)}u=t}else i||"\\"!==n||(a=t-1,f=!0,s+=e.slice(u,a))}return s+e.slice(u,n-1)}function g(e,t,n){if("true"===e)return!0;if("false"===e)return!1;if("-inf"===e)return-1/0;if("inf"===e||"+inf"===e)return 1/0;if("nan"===e||"+nan"===e||"-nan"===e)return NaN;if("-0"===e)return 0;let i;if((i=c.test(e))||d.test(e)){if(h.test(e))throw new r("leading zeroes are not allowed",{toml:t,ptr:n});let l=+e.replace(/_/g,"");if(isNaN(l))throw new r("invalid number",{toml:t,ptr:n});if(i&&!Number.isSafeInteger(l))throw new r("integer value cannot be represented losslessly",{toml:t,ptr:n});return l}let l=new u(e);if(!l.isValid())throw new r("invalid value",{toml:t,ptr:n});return l}function b(e,t,n,s=-1){if(0===s)throw new r("document contains excessively nested structures. aborting.",{toml:e,ptr:t});let u,c=e[t];if("["===c||"{"===c){let[o,a]="["===c?function(e,t,n=-1){let i,o=[];for(t++;"]"!==(i=e[t++])&&i;){if(","===i)throw new r("expected value, found comma",{toml:e,ptr:t-1});if("#"===i)t=l(e,t);else if(" "!==i&&"\t"!==i&&"\n"!==i&&"\r"!==i){let r=b(e,t-1,"]",n-1);o.push(r[0]),t=r[1]}}if(!i)throw new r("unfinished array encountered",{toml:e,ptr:t});return[o,t]}(e,t,s):function(e,t,n=-1){let i,l={},o=new Set,f=0;for(t++;"}"!==(i=e[t++])&&i;){if("\n"===i)throw new r("newlines are not allowed in inline tables",{toml:e,ptr:t-1});if("#"===i)throw new r("inline tables cannot contain comments",{toml:e,ptr:t-1});if(","===i)throw new r("expected key-value, found comma",{toml:e,ptr:t-1});if(" "!==i&&"\t"!==i){let i,a=l,s=!1,[u,c]=T(e,t-1);for(let n=0;n<u.length;n++){if(n&&(a=s?a[i]:a[i]={}),i=u[n],(s=Object.hasOwn(a,i))&&("object"!=typeof a[i]||o.has(a[i])))throw new r("trying to redefine an already defined value",{toml:e,ptr:t});s||"__proto__"!==i||Object.defineProperty(a,i,{enumerable:!0,configurable:!0,writable:!0})}if(s)throw new r("trying to redefine an already defined value",{toml:e,ptr:t});let[d,h]=b(e,c,"}",n-1);o.add(d),a[i]=d,f=","===e[(t=h)-1]?t-1:0}}if(f)throw new r("trailing commas are not allowed in inline tables",{toml:e,ptr:f});if(!i)throw new r("unfinished table encountered",{toml:e,ptr:t});return[l,t]}(e,t,s),u=n?f(e,a,",",n):a;if(a-u&&"}"===n){let t=i(e,a,u);if(t>-1)throw new r("newlines are not allowed in inline tables",{toml:e,ptr:t})}return[o,u]}if('"'===c||"'"===c){u=a(e,t);let i=p(e,t,u);if(n){if(u=o(e,u,"]"!==n),e[u]&&","!==e[u]&&e[u]!==n&&"\n"!==e[u]&&"\r"!==e[u])throw new r("unexpected character encountered",{toml:e,ptr:u});u+=+(","===e[u])}return[i,u]}u=f(e,t,",",n);let d=function(e,t,n,i){let o=e.slice(t,n),f=o.indexOf("#");f>-1&&(l(e,f),o=o.slice(0,f));let a=o.trimEnd();if(!i){let n=o.indexOf("\n",a.length);if(n>-1)throw new r("newlines are not allowed in inline tables",{toml:e,ptr:t+n})}return[a,f]}(e,t,u-+(","===e[u-1]),"]"===n);if(!d[0])throw new r("incomplete key-value declaration: no value specified",{toml:e,ptr:t});return n&&d[1]>-1&&(u=o(e,t+d[1]),u+=+(","===e[u])),[g(d[0],e,t),u]}let y=/^[a-zA-Z0-9-_]+[ \t]*$/;function T(e,t,n="="){let l=t-1,f=[],s=e.indexOf(n,t);if(s<0)throw new r("incomplete key-value: cannot find end of key",{toml:e,ptr:t});do{let o=e[t=++l];if(" "!==o&&"\t"!==o)if('"'===o||"'"===o){if(o===e[t+1]&&o===e[t+2])throw new r("multiline strings are not allowed in keys",{toml:e,ptr:t});let u=a(e,t);if(u<0)throw new r("unfinished string encountered",{toml:e,ptr:t});l=e.indexOf(".",u);let c=e.slice(u,l<0||l>s?s:l),d=i(c);if(d>-1)throw new r("newlines are not allowed in keys",{toml:e,ptr:t+l+d});if(c.trimStart())throw new r("found extra tokens after the string part",{toml:e,ptr:u});if(s<u&&(s=e.indexOf(n,u),s<0))throw new r("incomplete key-value: cannot find end of key",{toml:e,ptr:t});f.push(p(e,t,u))}else{l=e.indexOf(".",t);let n=e.slice(t,l<0||l>s?s:l);if(!y.test(n))throw new r("only letter, numbers, dashes and underscores are allowed in keys",{toml:e,ptr:t});f.push(n.trimEnd())}}while(l+1&&l<s);return[f,o(e,s+1,!0,!0)]}function v(e,t,n,r){let i,l,o=t,f=n,a=!1;for(let t=0;t<e.length;t++){if(t){if(o=a?o[i]:o[i]={},f=(l=f[i]).c,0===r&&(1===l.t||2===l.t))return null;if(2===l.t){let e=o.length-1;o=o[e],f=f[e].c}}if(i=e[t],(a=Object.hasOwn(o,i))&&0===f[i]?.t&&f[i]?.d)return null;a||("__proto__"===i&&(Object.defineProperty(o,i,{enumerable:!0,configurable:!0,writable:!0}),Object.defineProperty(f,i,{enumerable:!0,configurable:!0,writable:!0})),f[i]={t:t<e.length-1&&2===r?3:r,d:!1,i:0,c:{}})}if(l=f[i],l.t!==r&&(1!==r||3!==l.t))return null;if(2===r&&(l.d||(l.d=!0,o[i]=[]),o[i].push(o={}),l.c[l.i++]=l={t:1,d:!1,i:0,c:{}}),l.d)return null;if(l.d=!0,1===r)o=a?o[i]:o[i]={};else if(0===r&&a)return null;return[i,o,l.c]}function x(e,t){let n=t?.maxDepth??1e3,i={},l={},f=i,a=l;for(let t=o(e,0);t<e.length;){if("["===e[t]){let n="["===e[++t],o=T(e,t+=+n,"]");if(n){if("]"!==e[o[1]-1])throw new r("expected end of table declaration",{toml:e,ptr:o[1]-1});o[1]++}let s=v(o[0],i,l,n?2:1);if(!s)throw new r("trying to redefine an already defined table or value",{toml:e,ptr:t});a=s[2],f=s[1],t=o[1]}else{let i=T(e,t),l=v(i[0],f,a,0);if(!l)throw new r("trying to redefine an already defined table or value",{toml:e,ptr:t});let o=b(e,i[1],void 0,n);l[1][l[0]]=o[0],t=o[1]}if(t=o(e,t,!0),e[t]&&"\n"!==e[t]&&"\r"!==e[t])throw new r("each key-value declaration must be followed by an end-of-line",{toml:e,ptr:t});t=o(e,t)}return i}let O=/^[a-z0-9-_]+$/i;function j(e){let t=typeof e;if("object"===t){if(Array.isArray(e))return"array";if(e instanceof Date)return"date"}return t}function D(e){for(let t=0;t<e.length;t++)if("object"!==j(e[t]))return!1;return 0!=e.length}function k(e){return JSON.stringify(e).replace(/\x7f/g,"\\u007f")}function _(e,t,n){if(0===n)throw new Error("Could not stringify the object: maximum object depth exceeded");if("number"===t)return isNaN(e)?"nan":e===1/0?"inf":e===-1/0?"-inf":e.toString();if("bigint"===t||"boolean"===t)return e.toString();if("string"===t)return k(e);if("date"===t){if(isNaN(e.getTime()))throw new TypeError("cannot serialize invalid date");return e.toISOString()}return"object"===t?function(e,t){let n=Object.keys(e);if(0===n.length)return"{}";let r="{ ";for(let i=0;i<n.length;i++){let l=n[i];i&&(r+=", "),r+=O.test(l)?l:k(l),r+=" = ",r+=_(e[l],j(e[l]),t-1)}return r+" }"}(e,n):"array"===t?function(e,t){if(0===e.length)return"[]";let n="[ ";for(let r=0;r<e.length;r++){if(r&&(n+=", "),null===e[r]||void 0===e[r])throw new TypeError("arrays cannot contain null or undefined values");n+=_(e[r],j(e[r]),t-1)}return n+" ]"}(e,n):void 0}function $(e,t,n){if(0===n)throw new Error("Could not stringify the object: maximum object depth exceeded");let r="";for(let i=0;i<e.length;i++)r+=`[[${t}]]\n`,r+=S(e[i],t,n),r+="\n\n";return r}function S(e,t,n){if(0===n)throw new Error("Could not stringify the object: maximum object depth exceeded");let r="",i="",l=Object.keys(e);for(let o=0;o<l.length;o++){let f=l[o];if(null!==e[f]&&void 0!==e[f]){let l=j(e[f]);if("symbol"===l||"function"===l)throw new TypeError(`cannot serialize values of type '${l}'`);let o=O.test(f)?f:k(f);if("array"===l&&D(e[f]))i+=$(e[f],t?`${t}.${o}`:o,n-1);else if("object"===l){let r=t?`${t}.${o}`:o;i+=`[${r}]\n`,i+=S(e[f],r,n-1),i+="\n\n"}else r+=o,r+=" = ",r+=_(e[f],l,n),r+="\n"}}return`${r}\n${i}`.trim()}function E(e,t){if("object"!==j(e))throw new TypeError("stringify can only be called with an object");return S(e,"",t?.maxDepth??1e3)}const N={parse:x,stringify:E,TomlDate:u,TomlError:r}}}]);