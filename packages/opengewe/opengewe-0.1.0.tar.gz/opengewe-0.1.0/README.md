# OpenGewe

![ç‰ˆæœ¬](https://img.shields.io/badge/ç‰ˆæœ¬-0.1.0-blue)
![Python](https://img.shields.io/badge/Python-3.8+-brightgreen)
![åè®®](https://img.shields.io/badge/åè®®-MIT-green)

> åŸºäº GeWeAPI å’Œ GeWe ç§æœ‰éƒ¨ç½²æ–¹æ¡ˆçš„å¼‚æ­¥ Python å¾®ä¿¡æœºå™¨äººæ¡†æ¶ï¼Œæä¾›é«˜æ€§èƒ½çš„å¾®ä¿¡è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆ

## ç®€ä»‹

OpenGewe æ˜¯ä¸€ä¸ªåŸºäº [GeWeAPI](https://geweapi.com) çš„å¾®ä¿¡æœºå™¨äººæ¡†æ¶ï¼Œä¸“æ³¨äºæä¾›ä¸ªäººå¾®ä¿¡äºŒæ¬¡å¼€å‘èƒ½åŠ›ã€‚æœ¬æ¡†æ¶é‡‡ç”¨å¾®ä¿¡iPadåè®®ç™»å½•ï¼Œæä¾›ç¨³å®šã€å®‰å…¨çš„å¾®ä¿¡APIè®¿é—®èƒ½åŠ›ã€‚


## ä¸»è¦ç‰¹æ€§

- ğŸš€ **å®Œå…¨å¼‚æ­¥** - ä½¿ç”¨åŸç”Ÿ asyncio å®ç°ï¼Œæ”¯æŒé«˜å¹¶å‘å’Œå¤§æ•°æ®é‡å¤„ç†
- ğŸ“¨ **å…¨é¢æ¶ˆæ¯å¤„ç†** - å®ç°æ‰€æœ‰31ç§å›è°ƒæ¶ˆæ¯ç±»å‹çš„å¤„ç†
- ğŸ’¬ **å¤šåª’ä½“æ”¯æŒ** - æ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€è¯­éŸ³ã€è§†é¢‘ç­‰å¤šç§æ¶ˆæ¯ç±»å‹
- ğŸ‘¥ **å®Œæ•´ç¾¤ç®¡ç†** - è‡ªåŠ¨å…¥ç¾¤ã€é€€ç¾¤ã€é‚€è¯·å¥½å‹ã€ç¾¤æˆå‘˜ç®¡ç†ç­‰
- ğŸ”Œ **æ’ä»¶ç³»ç»Ÿ** - å¯æ‰©å±•çš„æ’ä»¶æ¶æ„ï¼Œæ”¯æŒåŠ¨æ€åŠ è½½/å¸è½½æ’ä»¶
- ğŸ”„ **APIé›†æˆ** - æä¾›RESTful APIï¼Œæ–¹ä¾¿ä¸å…¶ä»–ç³»ç»Ÿé›†æˆ
- ğŸ“Š **æ¶ˆæ¯é˜Ÿåˆ—** - æ”¯æŒç®€å•é˜Ÿåˆ—å’Œé«˜çº§é˜Ÿåˆ—ï¼ˆCeleryï¼‰ä¸¤ç§æ¶ˆæ¯å¤„ç†æ¨¡å¼
- ğŸ“± **æœ‹å‹åœˆæ“ä½œ** - æ”¯æŒå‘å¸ƒæœ‹å‹åœˆå†…å®¹ã€æµè§ˆæœ‹å‹åœˆç­‰
- ğŸµ **è§†é¢‘å·äº¤äº’** - æ”¯æŒè§†é¢‘å·ç›¸å…³çš„æ“ä½œ

## å…¼å®¹æ€§è¯´æ˜

âš ï¸ **æ³¨æ„ï¼šç”±äºåŸå…è´¹ç§æœ‰éƒ¨ç½²æ–¹æ¡ˆ[Gewechat](https://github.com/Devo919/Gewechat)åŸé¡¹ç›®æš‚åœç»´æŠ¤ï¼Œæœ¬é¡¹ç›®è™½ç„¶å…¼å®¹Gewechatï¼Œä½†ä¸æ¨èä½¿ç”¨ã€‚**

æœ¬é¡¹ç›®**è®¡åˆ’**å®Œå…¨å…¼å®¹Gewechatä»˜è´¹ç‰ˆæœ¬[GeWeAPI](https://geweapi.com)ã€‚ç”±äºåŸé¡¹ç›®æš‚åœç»´æŠ¤ï¼Œæˆ‘ä»¬å»ºè®®ç”¨æˆ·è½¬å‘ä½¿ç”¨GeWeAPIä»¥è·å¾—æŒç»­çš„æ”¯æŒå’Œæ›´æ–°ã€‚ä½¿ç”¨GeWeAPIåªéœ€ä¿®æ”¹`base_url`ä¸ºï¼š`http://www.geweapi.com/gewe/v2/api`ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«å¹¶åˆ‡æ¢åˆ°ä»˜è´¹ç‰ˆæ¨¡å¼ã€‚

## è¿ç§»åˆ°GeWeAPI

å¦‚æœæ‚¨å¸Œæœ›ç»§ç»­ä½¿ç”¨æœ¬é¡¹ç›®çš„åŠŸèƒ½ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿ç§»åˆ°GeWeAPI:

1. è®¿é—®[GeWeAPIå®˜æ–¹ç½‘ç«™](https://geweapi.com)æ³¨å†Œè´¦å·
2. è·å–GeWeAPIçš„token
3. åœ¨é…ç½®ä¸­å°†`base_url`ä¿®æ”¹ä¸ºGewe APIåœ°å€ï¼š`http://www.geweapi.com/gewe/v2/api` æˆ–å¤‡ç”¨åœ°å€ï¼ˆGeWeAPIç®¡ç†åå°ä¸­æ˜¾ç¤ºçš„ï¼‰
4. åœ¨GeWeAPIç®¡ç†åå°ä¸­æ‰«ç ç™»å½•å¾®ä¿¡è´¦å·ï¼Œè·å¾—app_id
5. åœ¨GeWeAPIç®¡ç†åå°ä¸­å¯¹æ­¤tokenè®¾ç½®å›è°ƒæœåŠ¡å™¨çš„åœ°å€

## å®‰è£…

### ä»PyPIå®‰è£…

```bash
pip install opengewe
```

### ä»æºç å®‰è£…

```bash
git clone https://github.com/Wangnov/OpenGewe.git
cd OpenGewe
pip install -e .
```

## å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨

```python
import asyncio
from opengewe import GeweClient

async def main():
    # åˆ›å»ºå®¢æˆ·ç«¯å®ä¾‹
    client = GeweClient(
        base_url="http://www.geweapi.com/gewe/v2/api",  # GeWeAPIæœåŠ¡çš„åŸºç¡€URLï¼ŒGeWeæœåŠ¡å™¨åªè¦æ²¡æœ‰é—®é¢˜å°±ä¸ä¼šå˜åŒ–ã€‚æå°‘æ•°æƒ…å†µä¸‹å¯èƒ½ä¼šå˜åŒ–ï¼Œå¯åœ¨GeWeAPIç®¡ç†åå°æŸ¥çœ‹æœ€æ–°çš„base_url
        download_url="",  # ä½¿ç”¨GeWeAPIæ— éœ€å¡«å†™
        callback_url="",  # åœ¨GeWeAPIè®¾ç½®å›è°ƒæœåŠ¡å™¨URLï¼Œæ­¤å¤„æ— éœ€è®¾ç½®
        app_id="your_app_id",  # åœ¨GeWeAPIç™»å½•æˆåŠŸåè¿”å›çš„app_id
        token="your_token",  # åœ¨GeWeAPIåˆ›å»ºçš„token
        is_gewe=True,  # ä½¿ç”¨ä»˜è´¹ç‰ˆGeWeAPI
    )
    
    # å‘é€æ–‡æœ¬æ¶ˆæ¯
    await client.send_text("filehelper", "ä½ å¥½ï¼Œè¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯")
    
    # è·å–é€šè®¯å½•åˆ—è¡¨
    contacts = await client.contact.get_contact_list()
    
    # å…³é—­å®¢æˆ·ç«¯
    await client.close()

if __name__ == "__main__":
    asyncio.run(main())
```

### é…ç½®æ–‡ä»¶

OpenGewe ä½¿ç”¨ TOML æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤ä¸º `main_config.toml`ï¼š

```toml
[gewe_apps]
# å¤šè®¾å¤‡é…ç½®
[gewe_apps.1]
name = "é»˜è®¤è®¾å¤‡"
base_url = "http://www.geweapi.com/gewe/v2/api"
app_id = "your_app_id"
token = "your_token"
is_gewe = true

[plugins]
plugins_dir = "plugins"
enabled_plugins = ["ExamplePlugin"]

[queue]
queue_type = "simple"  # å¯é€‰ "simple" æˆ– "advanced"

[logging]
level = "INFO"
format = "color"
path = "./logs"
stdout = true
```

### å‘½ä»¤è¡Œå·¥å…·

OpenGeweæä¾›äº†ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¯åŠ¨ï¼š

```bash
# æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
opengewe version

# å¯åŠ¨å®¢æˆ·ç«¯ï¼ˆä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®ï¼‰
opengewe client --config main_config.toml --device 1
```

## æ’ä»¶å¼€å‘

åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰æ’ä»¶ï¼š

1. åœ¨ `plugins` ç›®å½•ä¸‹åˆ›å»ºæ’ä»¶æ–‡ä»¶å¤¹
2. ç¼–å†™æ’ä»¶ä¸»ç±»ï¼Œç»§æ‰¿ `PluginBase`
3. å¯ä»¥ä½¿ç”¨è£…é¥°å™¨æ³¨å†Œæ¶ˆæ¯å¤„ç†å’Œå®šæ—¶ä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¼•å…¥opengeweçš„handleræ¨¡å—æ¥æ³¨å†Œæ¶ˆæ¯å¤„ç†
4. åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ç”¨æ’ä»¶
5. å¯ä»¥ä»¥å…¼å®¹XYBotå’ŒXXXBotçš„æ’ä»¶æ ¼å¼æ¥ç¼–å†™

ç¤ºä¾‹æ’ä»¶ï¼š

```python
from utils.plugin_base import PluginBase
from utils.decorators import on_text_message, schedule

class MyPlugin(PluginBase):
    """è‡ªå®šä¹‰æ’ä»¶ç¤ºä¾‹"""
    
    description = "è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªæ’ä»¶"
    author = "æ‚¨çš„åå­—"
    version = "1.0.0"
    
    def __init__(self):
        super().__init__()
        self.enable = True
        
    @on_text_message()
    async def handle_text(self, client, message):
        if message.text == "ä½ å¥½":
            await client.send_text(message.from_wxid, "ä½ å¥½ï¼æˆ‘æ˜¯OpenGeweæœºå™¨äºº")
    
    @schedule("interval", minutes=30)
    async def periodic_task(self, client):
        # æ‰§è¡Œå®šæœŸä»»åŠ¡çš„ä»£ç 
        pass
```

## æ¨¡å—è¯´æ˜

OpenGeweåŒ…å«ä»¥ä¸‹æ ¸å¿ƒæ¨¡å—ï¼š

- **login**: ç™»å½•ç›¸å…³åŠŸèƒ½
- **contact**: é€šè®¯å½•ç®¡ç†
- **group**: ç¾¤èŠç®¡ç†
- **message**: æ¶ˆæ¯æ”¶å‘
- **tag**: æ ‡ç­¾ç®¡ç†
- **personal**: ä¸ªäººä¿¡æ¯ç®¡ç†
- **favorite**: æ”¶è—åŠŸèƒ½
- **account**: è´¦å·ç®¡ç†
- **sns**: æœ‹å‹åœˆåŠŸèƒ½
- **finder**: è§†é¢‘å·åŠŸèƒ½

## è´¡çŒ®æŒ‡å—

å¯ä»¥Forkæœ¬é¡¹ç›®è¿›è¡Œä¿®æ”¹å’Œæ”¹è¿›

## è‡´è°¢

- ç‰¹åˆ«æ„Ÿè°¢[Gewechat](https://github.com/Devo919/Gewechat)é¡¹ç›®çš„å¼€æºç²¾ç¥
- æ„Ÿè°¢[XYBot](https://github.com/HenryXiaoYang/XYBotV2)é¡¹ç›®çš„å¼‚æ­¥å®ç°ç»™æœ¬é¡¹ç›®ä»¥å¯å‘
- æ„Ÿè°¢[XXXBot](https://github.com/NanSsye/xxxbot-pad)é¡¹ç›®çš„ç®¡ç†åå°å‰ç«¯å®ç°ç»™æœ¬é¡¹ç›®ä»¥å¯å‘ï¼Œå’Œä¸°å¯Œçš„æ’ä»¶å¼€å‘ç”Ÿæ€
- æ„Ÿè°¢æ‰€æœ‰å¯¹æœ¬é¡¹ç›®æä¾›æ”¯æŒå’Œåé¦ˆçš„ç”¨æˆ·

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE)

## å…è´£å£°æ˜

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”ã€‚ä½¿ç”¨æœ¬é¡¹ç›®å¯¼è‡´çš„ä»»ä½•é—®é¢˜ä¸å¼€å‘è€…æ— å…³ã€‚è¯·éµå®ˆå¾®ä¿¡ä½¿ç”¨æ¡æ¬¾å’Œç›¸å…³æ³•å¾‹æ³•è§„ã€‚

## è”ç³»æ–¹å¼

æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Ÿè¯·åœ¨GitHubä¸Šæäº¤Issueæˆ–Pull Requestã€‚
