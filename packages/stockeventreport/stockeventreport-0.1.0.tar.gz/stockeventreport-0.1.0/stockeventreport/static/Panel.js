import{c as R,A as E}from"./assets/Plugins-yOmUdOt6.js";var d=(t=>(t.part="part",t.supplierpart="supplierpart",t.manufacturerpart="manufacturerpart",t.partcategory="partcategory",t.partparametertemplate="partparametertemplate",t.parttesttemplate="parttesttemplate",t.projectcode="projectcode",t.stockitem="stockitem",t.stocklocation="stocklocation",t.stocklocationtype="stocklocationtype",t.stockhistory="stockhistory",t.build="build",t.buildline="buildline",t.builditem="builditem",t.company="company",t.purchaseorder="purchaseorder",t.purchaseorderlineitem="purchaseorderlineitem",t.salesorder="salesorder",t.salesordershipment="salesordershipment",t.returnorder="returnorder",t.returnorderlineitem="returnorderlineitem",t.importsession="importsession",t.address="address",t.contact="contact",t.owner="owner",t.user="user",t.group="group",t.reporttemplate="reporttemplate",t.labeltemplate="labeltemplate",t.pluginconfig="pluginconfig",t.contenttype="contenttype",t.selectionlist="selectionlist",t.error="error",t))(d||{});function k(){return"/api/"}function b(t,r,o){let e=t;return e.startsWith("/")||(e=k()+e),e&&r&&(e.indexOf(":id")>=0?e=e.replace(":id",`${r}`):e+=`${r}/`),e}const c=window.MantineCore.Alert,n=window.MantineCore.Button,C=window.MantineCore.Group,S=window.MantineCore.Stack,p=window.MantineCore.Text,v=window.MantineCore.Title,i=window.MantineNotifications.notifications,l=window.React.useCallback,w=window.React.useMemo,P=window.React.useState;function N({context:t}){const r=w(()=>t.model==d.part&&t.id||null,[t.model,t.id]),[o,e]=P(0),u=w(()=>{const s=(t==null?void 0:t.instance)??{};return JSON.stringify(s,null,2)},[t.instance]),f=l(async()=>{try{const m=await(await fetch("/plugin/stockeventreport/latest-report/")).json();m.url?window.open(m.url,"_blank"):i.show({title:"No Report Available",message:"No report has been generated yet.",color:"yellow"})}catch{i.show({title:"Error",message:"Failed to fetch report URL",color:"red"})}},[]),a=t.forms.edit({url:b(E.part_list,r),title:"Edit Part",preFormContent:React.createElement(c,{title:"Custom Plugin Form",color:"blue"},"This is a custom form launched from within a plugin!"),fields:{name:{},description:{},category:{}},successMessage:null,onFormSuccess:()=>{i.show({title:"Success",message:"Part updated successfully!",color:"green"})}}),g=l(()=>{a==null||a.open()},[a]),h=l(()=>{t.navigate("/home")},[t]);return React.createElement(React.Fragment,null,a.modal,React.createElement(S,{gap:"xs"},React.createElement(v,{order:3},"StockEventReport"),React.createElement(p,null,"This is a custom panel for the StockEventReport plugin."),React.createElement(C,{justify:"apart",wrap:"nowrap",gap:"sm"},React.createElement(n,{color:"blue",onClick:h},"Go to Dashboard"),r&&React.createElement(n,{color:"green",onClick:g},"Edit Part"),React.createElement(n,{onClick:()=>e(o+1)},"Increment Counter"),React.createElement(n,{color:"cyan",onClick:f},"Open Latest Report"),React.createElement(p,{size:"xl"},"Counter: ",o)),u?React.createElement(c,{title:"Instance Data",color:"blue"},u):React.createElement(c,{title:"No Instance",color:"yellow"},"No instance data available")))}function F(t){return R(t),React.createElement(N,{context:t})}export{F as renderStockEventReportPanel};
//# sourceMappingURL=Panel.js.map
