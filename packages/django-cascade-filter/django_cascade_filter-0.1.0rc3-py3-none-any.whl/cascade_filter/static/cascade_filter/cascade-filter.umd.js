(function(ee,D){typeof exports=="object"&&typeof module<"u"?module.exports=D():typeof define=="function"&&define.amd?define(D):(ee=typeof globalThis<"u"?globalThis:ee||self,ee["cascade-filter"]=D())})(this,function(){"use strict";var ua=Object.defineProperty;var sa=(ee,D,Me)=>D in ee?ua(ee,D,{enumerable:!0,configurable:!0,writable:!0,value:Me}):ee[D]=Me;var P=(ee,D,Me)=>sa(ee,typeof D!="symbol"?D+"":D,Me);var dn;const ee="5";typeof window<"u"&&((dn=window.__svelte??(window.__svelte={})).v??(dn.v=new Set)).add(ee);let D=!1,Me=!1;function wn(){D=!0}wn();const Ct=1,Mt=2,sr=4,En=8,yn=16,mn=1,An=2,Sn=4,Tn=8,Nn=16,On=1,xn=2,U=Symbol(),Cn="http://www.w3.org/1999/xhtml",or=!1;function Mn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}var It=Array.isArray,In=Array.prototype.indexOf,Ft=Array.from,fr=Object.defineProperty,Ie=Object.getOwnPropertyDescriptor,Fn=Object.getOwnPropertyDescriptors,Rn=Object.prototype,Ln=Array.prototype,cr=Object.getPrototypeOf,vr=Object.isExtensible;const Fe=()=>{};function kn(e){return e()}function Rt(e){for(var t=0;t<e.length;t++)e[t]()}const W=2,dr=4,tt=8,Lt=16,ue=32,Re=64,rt=128,$=256,nt=512,z=1024,ne=2048,de=4096,se=8192,lt=16384,Dn=32768,kt=65536,_r=1<<17,Pn=1<<19,hr=1<<20,Dt=1<<21,oe=Symbol("$state"),Un=Symbol("legacy props");function zn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function jn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Hn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function qn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Bn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Vn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function $n(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Gn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Wn=!1;function me(e){if(typeof e!="object"||e===null||oe in e)return e;const t=cr(e);if(t!==Rn&&t!==Ln)return e;var r=new Map,n=It(e),i=pe(0),l=C,a=s=>{var u=C;ie(l);var o=s();return ie(u),o};return n&&r.set("length",pe(e.length)),new Proxy(e,{defineProperty(s,u,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&Vn();var d=r.get(u);return d===void 0?(d=a(()=>pe(o.value)),r.set(u,d)):T(d,a(()=>me(o.value))),!0},deleteProperty(s,u){var o=r.get(u);if(o===void 0)u in s&&(r.set(u,a(()=>pe(U))),Pt(i));else{if(n&&typeof u=="string"){var d=r.get("length"),c=Number(u);Number.isInteger(c)&&c<d.v&&T(d,c)}T(o,U),Pt(i)}return!0},get(s,u,o){var v;if(u===oe)return e;var d=r.get(u),c=u in s;if(d===void 0&&(!c||(v=Ie(s,u))!=null&&v.writable)&&(d=a(()=>pe(me(c?s[u]:U))),r.set(u,d)),d!==void 0){var f=_(d);return f===U?void 0:f}return Reflect.get(s,u,o)},getOwnPropertyDescriptor(s,u){var o=Reflect.getOwnPropertyDescriptor(s,u);if(o&&"value"in o){var d=r.get(u);d&&(o.value=_(d))}else if(o===void 0){var c=r.get(u),f=c==null?void 0:c.v;if(c!==void 0&&f!==U)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return o},has(s,u){var f;if(u===oe)return!0;var o=r.get(u),d=o!==void 0&&o.v!==U||Reflect.has(s,u);if(o!==void 0||M!==null&&(!d||(f=Ie(s,u))!=null&&f.writable)){o===void 0&&(o=a(()=>pe(d?me(s[u]):U)),r.set(u,o));var c=_(o);if(c===U)return!1}return d},set(s,u,o,d){var b;var c=r.get(u),f=u in s;if(n&&u==="length")for(var v=o;v<c.v;v+=1){var h=r.get(v+"");h!==void 0?T(h,U):v in s&&(h=a(()=>pe(U)),r.set(v+"",h))}c===void 0?(!f||(b=Ie(s,u))!=null&&b.writable)&&(c=a(()=>pe(void 0)),T(c,a(()=>me(o))),r.set(u,c)):(f=c.v!==U,T(c,a(()=>me(o))));var y=Reflect.getOwnPropertyDescriptor(s,u);if(y!=null&&y.set&&y.set.call(d,o),!f){if(n&&typeof u=="string"){var g=r.get("length"),w=Number(u);Number.isInteger(w)&&w>=g.v&&T(g,w+1)}Pt(i)}return!0},ownKeys(s){_(i);var u=Reflect.ownKeys(s).filter(c=>{var f=r.get(c);return f===void 0||f.v!==U});for(var[o,d]of r)d.v!==U&&!(o in s)&&u.push(o);return u},setPrototypeOf(){$n()}})}function Pt(e,t=1){T(e,e.v+t)}function br(e){try{if(e!==null&&typeof e=="object"&&oe in e)return e[oe]}catch{}return e}function Qn(e,t){return Object.is(br(e),br(t))}var gr,pr,wr,Er;function Yn(){if(gr===void 0){gr=window,pr=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;wr=Ie(t,"firstChild").get,Er=Ie(t,"nextSibling").get,vr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),vr(r)&&(r.__t=void 0)}}function Ut(e=""){return document.createTextNode(e)}function it(e){return wr.call(e)}function at(e){return Er.call(e)}function x(e,t){return it(e)}function Q(e,t){{var r=it(e);return r instanceof Comment&&r.data===""?at(r):r}}function F(e,t=1,r=!1){let n=e;for(;t--;)n=at(n);return n}function Kn(e){e.textContent=""}function yr(e){return e===this.v}function zt(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Xn(e,t){return e!==t}function jt(e){return!zt(e,this.v)}function Be(e){var t=W|ne,r=C!==null&&(C.f&W)!==0?C:null;return M===null||r!==null&&(r.f&$)!==0?t|=$:M.f|=hr,{ctx:R,deps:null,effects:null,equals:yr,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??M}}function fe(e){const t=Be(e);return t.equals=jt,t}function mr(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)_e(t[r])}}function Jn(e){for(var t=e.parent;t!==null;){if((t.f&W)===0)return t;t=t.parent}return null}function Ar(e){var t,r=M;he(Jn(e));try{mr(e),t=Dr(e)}finally{he(r)}return t}function Sr(e){var t=Ar(e),r=(be||(e.f&$)!==0)&&e.deps!==null?de:z;K(e,r),e.equals(t)||(e.v=t,e.wv=Rr())}function Tr(e){M===null&&C===null&&Hn(),C!==null&&(C.f&$)!==0&&M===null&&jn(),Ge&&zn()}function Zn(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Le(e,t,r,n=!0){var i=M,l={ctx:R,deps:null,nodes_start:null,nodes_end:null,f:e|ne,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(r)try{bt(l),l.f|=Dn}catch(u){throw _e(l),u}else t!==null&&gt(l);var a=r&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&(hr|rt))===0;if(!a&&n&&(i!==null&&Zn(l,i),C!==null&&(C.f&W)!==0)){var s=C;(s.effects??(s.effects=[])).push(l)}return l}function Ht(e){const t=Le(tt,null,!1);return K(t,z),t.teardown=e,t}function qt(e){Tr();var t=M!==null&&(M.f&ue)!==0&&R!==null&&!R.m;if(t){var r=R;(r.e??(r.e=[])).push({fn:e,effect:M,reaction:C})}else{var n=Ve(e);return n}}function el(e){return Tr(),ke(e)}function tl(e){const t=Le(Re,e,!0);return(r={})=>new Promise(n=>{r.outro?$e(t,()=>{_e(t),n(void 0)}):(_e(t),n(void 0))})}function Ve(e){return Le(dr,e,!1)}function Bt(e,t){var r=R,n={effect:null,ran:!1};r.l.r1.push(n),n.effect=ke(()=>{e(),!n.ran&&(n.ran=!0,T(r.l.r2,!0),te(t))})}function Vt(){var e=R;ke(()=>{if(_(e.l.r2)){for(var t of e.l.r1){var r=t.effect;(r.f&z)!==0&&K(r,de),Pe(r)&&bt(r),t.ran=!1}e.l.r2.v=!1}})}function ke(e){return Le(tt,e,!0)}function ce(e,t=[],r=Be){const n=t.map(r);return ut(()=>e(...n.map(_)))}function ut(e,t=0){return Le(tt|Lt|t,e,!0)}function De(e,t=!0){return Le(tt|ue,e,!0,t)}function Nr(e){var t=e.teardown;if(t!==null){const r=Ge,n=C;Ir(!0),ie(null);try{t.call(null)}finally{Ir(r),ie(n)}}}function Or(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;(r.f&Re)!==0?r.parent=null:_e(r,t),r=n}}function rl(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&ue)===0&&_e(t),t=r}}function _e(e,t=!0){var r=!1;(t||(e.f&Pn)!==0)&&e.nodes_start!==null&&(nl(e.nodes_start,e.nodes_end),r=!0),Or(e,t&&!r),ht(e,0),K(e,lt);var n=e.transitions;if(n!==null)for(const l of n)l.stop();Nr(e);var i=e.parent;i!==null&&i.first!==null&&xr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function nl(e,t){for(;e!==null;){var r=e===t?null:at(e);e.remove(),e=r}}function xr(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function $e(e,t){var r=[];$t(e,r,!0),Cr(r,()=>{_e(e),t&&t()})}function Cr(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function $t(e,t,r){if((e.f&se)===0){if(e.f^=se,e.transitions!==null)for(const a of e.transitions)(a.is_global||r)&&t.push(a);for(var n=e.first;n!==null;){var i=n.next,l=(n.f&kt)!==0||(n.f&ue)!==0;$t(n,t,l?r:!1),n=i}}}function st(e){Mr(e,!0)}function Mr(e,t){if((e.f&se)!==0){e.f^=se,(e.f&z)===0&&(e.f^=z),Pe(e)&&(K(e,ne),gt(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&kt)!==0||(r.f&ue)!==0;Mr(r,i?t:!1),r=n}if(e.transitions!==null)for(const l of e.transitions)(l.is_global||t)&&l.in()}}let ot=[];function ll(){var e=ot;ot=[],Rt(e)}function Gt(e){ot.length===0&&queueMicrotask(ll),ot.push(e)}let ft=!1,Wt=!1,ct=null,Ae=!1,Ge=!1;function Ir(e){Ge=e}let vt=[],oa=[],C=null,le=!1;function ie(e){C=e}let M=null;function he(e){M=e}let j=null;function il(e){C!==null&&C.f&Dt&&(j===null?j=[e]:j.push(e))}let H=null,G=0,Y=null;function al(e){Y=e}let Fr=1,dt=0,be=!1,ge=null;function Rr(){return++Fr}function Pe(e){var c;var t=e.f;if((t&ne)!==0)return!0;if((t&de)!==0){var r=e.deps,n=(t&$)!==0;if(r!==null){var i,l,a=(t&nt)!==0,s=n&&M!==null&&!be,u=r.length;if(a||s){var o=e,d=o.parent;for(i=0;i<u;i++)l=r[i],(a||!((c=l==null?void 0:l.reactions)!=null&&c.includes(o)))&&(l.reactions??(l.reactions=[])).push(o);a&&(o.f^=nt),s&&d!==null&&(d.f&$)===0&&(o.f^=$)}for(i=0;i<u;i++)if(l=r[i],Pe(l)&&Sr(l),l.wv>e.wv)return!0}(!n||M!==null&&!be)&&K(e,z)}return!1}function ul(e,t){for(var r=t;r!==null;){if((r.f&rt)!==0)try{r.fn(e);return}catch{r.f^=rt}r=r.parent}throw ft=!1,e}function Lr(e){return(e.f&lt)===0&&(e.parent===null||(e.parent.f&rt)===0)}function _t(e,t,r,n){if(ft){if(r===null&&(ft=!1),Lr(t))throw e;return}if(r!==null&&(ft=!0),ul(e,t),Lr(t))throw e}function kr(e,t,r=!0){var n=e.reactions;if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];j!=null&&j.includes(e)||((l.f&W)!==0?kr(l,t,!1):t===l&&(r?K(l,ne):(l.f&z)!==0&&K(l,de),gt(l)))}}function Dr(e){var v;var t=H,r=G,n=Y,i=C,l=be,a=j,s=R,u=le,o=e.f;H=null,G=0,Y=null,be=(o&$)!==0&&(le||!Ae||C===null),C=(o&(ue|Re))===0?e:null,j=null,jr(e.ctx),le=!1,dt++,e.f|=Dt;try{var d=(0,e.fn)(),c=e.deps;if(H!==null){var f;if(ht(e,G),c!==null&&G>0)for(c.length=G+H.length,f=0;f<H.length;f++)c[G+f]=H[f];else e.deps=c=H;if(!be)for(f=G;f<c.length;f++)((v=c[f]).reactions??(v.reactions=[])).push(e)}else c!==null&&G<c.length&&(ht(e,G),c.length=G);if(Ue()&&Y!==null&&!le&&c!==null&&(e.f&(W|de|ne))===0)for(f=0;f<Y.length;f++)kr(Y[f],e);return i!==null&&i!==e&&(dt++,Y!==null&&(n===null?n=Y:n.push(...Y))),d}finally{H=t,G=r,Y=n,C=i,be=l,j=a,jr(s),le=u,e.f^=Dt}}function sl(e,t){let r=t.reactions;if(r!==null){var n=In.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&(t.f&W)!==0&&(H===null||!H.includes(t))&&(K(t,de),(t.f&($|nt))===0&&(t.f^=nt),mr(t),ht(t,0))}function ht(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)sl(e,r[n])}function bt(e){var t=e.f;if((t&lt)===0){K(e,z);var r=M,n=R,i=Ae;M=e,Ae=!0;try{(t&Lt)!==0?rl(e):Or(e),Nr(e);var l=Dr(e);e.teardown=typeof l=="function"?l:null,e.wv=Fr;var a=e.deps,s;or&&Me&&e.f&ne}catch(u){_t(u,e,r,n||e.ctx)}finally{Ae=i,M=r}}}function ol(){try{qn()}catch(e){if(ct!==null)_t(e,ct,null);else throw e}}function fl(){var e=Ae;try{var t=0;for(Ae=!0;vt.length>0;){t++>1e3&&ol();var r=vt,n=r.length;vt=[];for(var i=0;i<n;i++){var l=vl(r[i]);cl(l)}We.clear()}}finally{Wt=!1,Ae=e,ct=null}}function cl(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];if((n.f&(lt|se))===0)try{Pe(n)&&(bt(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?xr(n):n.fn=null))}catch(i){_t(i,n,null,n.ctx)}}}function gt(e){Wt||(Wt=!0,queueMicrotask(fl));for(var t=ct=e;t.parent!==null;){t=t.parent;var r=t.f;if((r&(Re|ue))!==0){if((r&z)===0)return;t.f^=z}}vt.push(t)}function vl(e){for(var t=[],r=e;r!==null;){var n=r.f,i=(n&(ue|Re))!==0,l=i&&(n&z)!==0;if(!l&&(n&se)===0){if((n&dr)!==0)t.push(r);else if(i)r.f^=z;else try{Pe(r)&&bt(r)}catch(u){_t(u,r,null,r.ctx)}var a=r.first;if(a!==null){r=a;continue}}var s=r.parent;for(r=r.next;r===null&&s!==null;)r=s.next,s=s.parent}return t}function _(e){var t=e.f,r=(t&W)!==0;if(ge!==null&&ge.add(e),C!==null&&!le){if(!(j!=null&&j.includes(e))){var n=C.deps;e.rv<dt&&(e.rv=dt,H===null&&n!==null&&n[G]===e?G++:H===null?H=[e]:(!be||!H.includes(e))&&H.push(e))}}else if(r&&e.deps===null&&e.effects===null){var i=e,l=i.parent;l!==null&&(l.f&$)===0&&(i.f^=$)}return r&&(i=e,Pe(i)&&Sr(i)),Ge&&We.has(e)?We.get(e):e.v}function dl(e){var t=ge;ge=new Set;var r=ge,n;try{if(te(e),t!==null)for(n of ge)t.add(n)}finally{ge=t}return r}function Pr(e){var t=dl(()=>te(e));for(var r of t)if((r.f&_r)!==0)for(const n of r.deps||[])(n.f&W)===0&&Ye(n,n.v);else Ye(r,r.v)}function te(e){var t=le;try{return le=!0,e()}finally{le=t}}const _l=-7169;function K(e,t){e.f=e.f&_l|t}function Ur(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(oe in e)Qt(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&oe in r&&Qt(r)}}}function Qt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Qt(e[n],t)}catch{}const r=cr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Fn(r);for(let i in n){const l=n[i].get;if(l)try{l.call(e)}catch{}}}}}const We=new Map;function Qe(e,t){var r={f:0,v:e,reactions:null,equals:yr,rv:0,wv:0};return r}function pe(e,t){const r=Qe(e);return il(r),r}function L(e,t=!1){var n;const r=Qe(e);return t||(r.equals=jt),D&&R!==null&&R.l!==null&&((n=R.l).s??(n.s=[])).push(r),r}function T(e,t,r=!1){C!==null&&!le&&Ue()&&(C.f&(W|Lt))!==0&&!(j!=null&&j.includes(e))&&Gn();let n=r?me(t):t;return Ye(e,n)}function Ye(e,t){if(!e.equals(t)){var r=e.v;Ge?We.set(e,t):We.set(e,r),e.v=t,(e.f&W)!==0&&((e.f&ne)!==0&&Ar(e),K(e,(e.f&$)===0?z:de)),e.wv=Rr(),zr(e,ne),Ue()&&M!==null&&(M.f&z)!==0&&(M.f&(ue|Re))===0&&(Y===null?al([e]):Y.push(e))}return t}function zr(e,t){var r=e.reactions;if(r!==null)for(var n=Ue(),i=r.length,l=0;l<i;l++){var a=r[l],s=a.f;(s&ne)===0&&(!n&&a===M||(K(a,t),(s&(z|$))!==0&&((s&W)!==0?zr(a,de):gt(a))))}}let R=null;function jr(e){R=e}function B(e,t=!1,r){var n=R={p:R,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};D&&!t&&(R.l={s:null,u:null,r1:[],r2:Qe(!1)}),Ht(()=>{n.d=!0})}function V(e){const t=R;if(t!==null){const a=t.e;if(a!==null){var r=M,n=C;t.e=null;try{for(var i=0;i<a.length;i++){var l=a[i];he(l.effect),ie(l.reaction),Ve(l.fn)}}finally{he(r),ie(n)}}R=t.p,t.m=!0}return{}}function Ue(){return!D||R!==null&&R.l===null}const hl=["touchstart","touchmove"];function bl(e){return hl.includes(e)}let Hr=!1;function gl(){Hr||(Hr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function qr(e){var t=C,r=M;ie(null),he(null);try{return e()}finally{ie(t),he(r)}}function Yt(e,t,r,n=r){e.addEventListener(t,()=>qr(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),gl()}const pl=new Set,Br=new Set;function wl(e,t,r,n={}){function i(l){if(n.capture||Ke.call(t,l),!l.cancelBubble)return qr(()=>r==null?void 0:r.call(this,l))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Gt(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function ve(e,t,r,n,i){var l={capture:n,passive:i},a=wl(e,t,r,l);(t===document.body||t===window||t===document)&&Ht(()=>{t.removeEventListener(e,a,l)})}function Ke(e){var b;var t=this,r=t.ownerDocument,n=e.type,i=((b=e.composedPath)==null?void 0:b.call(e))||[],l=i[0]||e.target,a=0,s=e.__root;if(s){var u=i.indexOf(s);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var o=i.indexOf(t);if(o===-1)return;u<=o&&(a=u)}if(l=i[a]||e.target,l!==t){fr(e,"currentTarget",{configurable:!0,get(){return l||r}});var d=C,c=M;ie(null),he(null);try{for(var f,v=[];l!==null;){var h=l.assignedSlot||l.parentNode||l.host||null;try{var y=l["__"+n];if(y!=null&&(!l.disabled||e.target===l))if(It(y)){var[g,...w]=y;g.apply(l,[e,...w])}else y.call(l,e)}catch(E){f?v.push(E):f=E}if(e.cancelBubble||h===t||h===null)break;l=h}if(f){for(let E of v)queueMicrotask(()=>{throw E});throw f}}finally{e.__root=t,delete e.currentTarget,ie(d),he(c)}}}function El(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Kt(e,t){var r=M;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function I(e,t){var r=(t&On)!==0,n=(t&xn)!==0,i,l=!e.startsWith("<!>");return()=>{i===void 0&&(i=El(l?e:"<!>"+e),r||(i=it(i)));var a=n||pr?document.importNode(i,!0):i.cloneNode(!0);if(r){var s=it(a),u=a.lastChild;Kt(s,u)}else Kt(a,a);return a}}function pt(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Ut();return e.append(t,r),Kt(t,r),e}function O(e,t){e!==null&&e.before(t)}function Se(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function yl(e,t){return ml(e,t)}const ze=new Map;function ml(e,{target:t,anchor:r,props:n={},events:i,context:l,intro:a=!0}){Yn();var s=new Set,u=c=>{for(var f=0;f<c.length;f++){var v=c[f];if(!s.has(v)){s.add(v);var h=bl(v);t.addEventListener(v,Ke,{passive:h});var y=ze.get(v);y===void 0?(document.addEventListener(v,Ke,{passive:h}),ze.set(v,1)):ze.set(v,y+1)}}};u(Ft(pl)),Br.add(u);var o=void 0,d=tl(()=>{var c=r??t.appendChild(Ut());return De(()=>{if(l){B({});var f=R;f.c=l}i&&(n.$$events=i),o=e(c,n)||{},l&&V()}),()=>{var h;for(var f of s){t.removeEventListener(f,Ke);var v=ze.get(f);--v===0?(document.removeEventListener(f,Ke),ze.delete(f)):ze.set(f,v)}Br.delete(u),c!==r&&((h=c.parentNode)==null||h.removeChild(c))}});return Al.set(o,d),o}let Al=new WeakMap;function we(e,t,[r,n]=[0,0]){var i=e,l=null,a=null,s=U,u=r>0?kt:0,o=!1;const d=(f,v=!0)=>{o=!0,c(v,f)},c=(f,v)=>{s!==(s=f)&&(s?(l?st(l):v&&(l=De(()=>v(i))),a&&$e(a,()=>{a=null})):(a?st(a):v&&(a=De(()=>v(i,[r+1,n]))),l&&$e(l,()=>{l=null})))};ut(()=>{o=!1,t(d),o||c(null,null)},u)}function Sl(e,t,r){var n=e,i=U,l,a=Ue()?Xn:zt;ut(()=>{a(i,i=t())&&(l&&$e(l),l=De(()=>r(n)))})}function Tl(e,t){return t}function Nl(e,t,r,n){for(var i=[],l=t.length,a=0;a<l;a++)$t(t[a].e,i,!0);var s=l>0&&i.length===0&&r!==null;if(s){var u=r.parentNode;Kn(u),u.append(r),n.clear(),Ee(e,t[0].prev,t[l-1].next)}Cr(i,()=>{for(var o=0;o<l;o++){var d=t[o];s||(n.delete(d.k),Ee(e,d.prev,d.next)),_e(d.e,!s)}})}function wt(e,t,r,n,i,l=null){var a=e,s={flags:t,items:new Map,first:null},u=(t&sr)!==0;if(u){var o=e;a=o.appendChild(Ut())}var d=null,c=!1,f=fe(()=>{var v=r();return It(v)?v:v==null?[]:Ft(v)});ut(()=>{var v=_(f),h=v.length;c&&h===0||(c=h===0,Ol(v,s,a,i,t,n,r),l!==null&&(h===0?d?st(d):d=De(()=>l(a)):d!==null&&$e(d,()=>{d=null})),_(f))})}function Ol(e,t,r,n,i,l,a){var _n,hn,bn,gn;var s=(i&En)!==0,u=(i&(Ct|Mt))!==0,o=e.length,d=t.items,c=t.first,f=c,v,h=null,y,g=[],w=[],b,E,p,A;if(s)for(A=0;A<o;A+=1)b=e[A],E=l(b,A),p=d.get(E),p!==void 0&&((_n=p.a)==null||_n.measure(),(y??(y=new Set)).add(p));for(A=0;A<o;A+=1){if(b=e[A],E=l(b,A),p=d.get(E),p===void 0){var q=f?f.e.nodes_start:r;h=Cl(q,t,h,h===null?t.first:h.next,b,E,A,n,i,a),d.set(E,h),g=[],w=[],f=h.next;continue}if(u&&xl(p,b,A,i),(p.e.f&se)!==0&&(st(p.e),s&&((hn=p.a)==null||hn.unfix(),(y??(y=new Set)).delete(p))),p!==f){if(v!==void 0&&v.has(p)){if(g.length<w.length){var Z=w[0],S;h=Z.prev;var k=g[0],re=g[g.length-1];for(S=0;S<g.length;S+=1)Vr(g[S],Z,r);for(S=0;S<w.length;S+=1)v.delete(w[S]);Ee(t,k.prev,re.next),Ee(t,h,k),Ee(t,re,Z),f=Z,h=re,A-=1,g=[],w=[]}else v.delete(p),Vr(p,f,r),Ee(t,p.prev,p.next),Ee(t,p,h===null?t.first:h.next),Ee(t,h,p),h=p;continue}for(g=[],w=[];f!==null&&f.k!==E;)(f.e.f&se)===0&&(v??(v=new Set)).add(f),w.push(f),f=f.next;if(f===null)continue;p=f}g.push(p),h=p,f=p.next}if(f!==null||v!==void 0){for(var xe=v===void 0?[]:Ft(v);f!==null;)(f.e.f&se)===0&&xe.push(f),f=f.next;var Ce=xe.length;if(Ce>0){var aa=(i&sr)!==0&&o===0?r:null;if(s){for(A=0;A<Ce;A+=1)(bn=xe[A].a)==null||bn.measure();for(A=0;A<Ce;A+=1)(gn=xe[A].a)==null||gn.fix()}Nl(t,xe,aa,d)}}s&&Gt(()=>{var pn;if(y!==void 0)for(p of y)(pn=p.a)==null||pn.apply()}),M.first=t.first&&t.first.e,M.last=h&&h.e}function xl(e,t,r,n){(n&Ct)!==0&&Ye(e.v,t),(n&Mt)!==0?Ye(e.i,r):e.i=r}function Cl(e,t,r,n,i,l,a,s,u,o){var d=(u&Ct)!==0,c=(u&yn)===0,f=d?c?L(i):Qe(i):i,v=(u&Mt)===0?a:Qe(a),h={i:v,v:f,k:l,a:null,e:null,prev:r,next:n};try{return h.e=De(()=>s(e,f,v,o),Wn),h.e.prev=r&&r.e,h.e.next=n&&n.e,r===null?t.first=h:(r.next=h,r.e.next=h.e),n!==null&&(n.prev=h,n.e.prev=h.e),h}finally{}}function Vr(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,l=e.e.nodes_start;l!==n;){var a=at(l);i.before(l),l=a}}function Ee(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Et(e,t,r,n,i){var s;var l=(s=t.$$slots)==null?void 0:s[r],a=!1;l===!0&&(l=t[r==="default"?"children":r],a=!0),l===void 0||l(e,a?()=>n:n)}const $r=[...` 	
\r\f \v\uFEFF`];function Ml(e,t,r){var n=e==null?"":""+e;if(r){for(var i in r)if(r[i])n=n?n+" "+i:i;else if(n.length)for(var l=i.length,a=0;(a=n.indexOf(i,a))>=0;){var s=a+l;(a===0||$r.includes(n[a-1]))&&(s===n.length||$r.includes(n[s]))?n=(a===0?"":n.substring(0,a))+n.substring(s+1):a=s}}return n===""?null:n}function Il(e,t){return e==null?null:String(e)}function Gr(e,t,r,n,i,l){var a=e.__className;if(a!==r||a===void 0){var s=Ml(r,n,l);s==null?e.removeAttribute("class"):e.className=s,e.__className=r}else if(l&&i!==l)for(var u in l){var o=!!l[u];(i==null||o!==!!i[u])&&e.classList.toggle(u,o)}return l}function Fl(e,t,r,n){var i=e.__style;if(i!==t){var l=Il(t);l==null?e.removeAttribute("style"):e.style.cssText=l,e.__style=t}return n}const Rl=Symbol("is custom element"),Ll=Symbol("is html");function Wr(e,t){var r=kl(e);r.checked!==(r.checked=t??void 0)&&(e.checked=t)}function kl(e){return e.__attributes??(e.__attributes={[Rl]:e.nodeName.includes("-"),[Ll]:e.namespaceURI===Cn})}function Xt(e,t,r=t){var n=Ue();Yt(e,"input",i=>{var l=i?e.defaultValue:e.value;if(l=Jt(e)?Zt(l):l,r(l),n&&l!==(l=t())){var a=e.selectionStart,s=e.selectionEnd;e.value=l??"",s!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(s,e.value.length))}}),te(t)==null&&e.value&&r(Jt(e)?Zt(e.value):e.value),ke(()=>{var i=t();Jt(e)&&i===Zt(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Dl(e,t,r=t){Yt(e,"change",n=>{var i=n?e.defaultChecked:e.checked;r(i)}),te(t)==null&&r(e.checked),ke(()=>{var n=t();e.checked=!!n})}function Jt(e){var t=e.type;return t==="number"||t==="range"}function Zt(e){return e===""?null:+e}function Qr(e,t,r){if(e.multiple)return Ul(e,t);for(var n of e.options){var i=Xe(n);if(Qn(i,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Pl(e,t){Ve(()=>{var r=new MutationObserver(()=>{var n=e.__value;Qr(e,n)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function Yr(e,t,r=t){var n=!0;Yt(e,"change",i=>{var l=i?"[selected]":":checked",a;if(e.multiple)a=[].map.call(e.querySelectorAll(l),Xe);else{var s=e.querySelector(l)??e.querySelector("option:not([disabled])");a=s&&Xe(s)}r(a)}),Ve(()=>{var i=t();if(Qr(e,i,n),n&&i===void 0){var l=e.querySelector(":checked");l!==null&&(i=Xe(l),r(i))}e.__value=i,n=!1}),Pl(e)}function Ul(e,t){for(var r of e.options)r.selected=~t.indexOf(Xe(r))}function Xe(e){return"__value"in e?e.__value:e.value}function Kr(e,t){return e===t||(e==null?void 0:e[oe])===t}function yt(e={},t,r,n){return Ve(()=>{var i,l;return ke(()=>{i=l,l=[],te(()=>{e!==r(...l)&&(t(e,...l),i&&Kr(r(...i),e)&&t(null,...i))})}),()=>{Gt(()=>{l&&Kr(r(...l),e)&&t(null,...l)})}}),e}function X(e=!1){const t=R,r=t.l.u;if(!r)return;let n=()=>Ur(t.s);if(e){let i=0,l={};const a=Be(()=>{let s=!1;const u=t.s;for(const o in u)u[o]!==l[o]&&(l[o]=u[o],s=!0);return s&&i++,i});n=()=>_(a)}r.b.length&&el(()=>{Xr(t,n),Rt(r.b)}),qt(()=>{const i=te(()=>r.m.map(kn));return()=>{for(const l of i)typeof l=="function"&&l()}}),r.a.length&&qt(()=>{Xr(t,n),Rt(r.a)})}function Xr(e,t){if(e.l.s)for(const r of e.l.s)_(r);t()}function zl(e){R===null&&Mn(),D&&R.l!==null?jl(R).m.push(e):qt(()=>{const t=te(e);if(typeof t=="function")return t})}function jl(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}function Jr(e,t,r){if(e==null)return t(void 0),Fe;const n=te(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const je=[];function er(e,t=Fe){let r=null;const n=new Set;function i(s){if(zt(e,s)&&(e=s,r)){const u=!je.length;for(const o of n)o[1](),je.push(o,e);if(u){for(let o=0;o<je.length;o+=2)je[o][0](je[o+1]);je.length=0}}}function l(s){i(s(e))}function a(s,u=Fe){const o=[s,u];return n.add(o),n.size===1&&(r=t(i,l)||Fe),s(e),()=>{n.delete(o),n.size===0&&r&&(r(),r=null)}}return{set:i,update:l,subscribe:a}}function Zr(e){let t;return Jr(e,r=>t=r)(),t}let mt=!1,tr=Symbol();function Hl(e,t,r){const n=r[t]??(r[t]={store:null,source:L(void 0),unsubscribe:Fe});if(n.store!==e&&!(tr in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=Fe;else{var i=!0;n.unsubscribe=Jr(e,l=>{i?n.source.v=l:T(n.source,l)}),i=!1}return e&&tr in r?Zr(e):_(n.source)}function ql(){const e={};function t(){Ht(()=>{for(var r in e)e[r].unsubscribe();fr(e,tr,{enumerable:!1,value:!0})})}return[e,t]}function Bl(e){var t=mt;try{return mt=!1,[e(),mt]}finally{mt=t}}function en(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function m(e,t,r,n){var Z;var i=(r&mn)!==0,l=!D||(r&An)!==0,a=(r&Tn)!==0,s=(r&Nn)!==0,u=!1,o;a?[o,u]=Bl(()=>e[t]):o=e[t];var d=oe in e||Un in e,c=a&&(((Z=Ie(e,t))==null?void 0:Z.set)??(d&&t in e&&(S=>e[t]=S)))||void 0,f=n,v=!0,h=!1,y=()=>(h=!0,v&&(v=!1,s?f=te(n):f=n),f);o===void 0&&n!==void 0&&(c&&l&&Bn(),o=y(),c&&c(o));var g;if(l)g=()=>{var S=e[t];return S===void 0?y():(v=!0,h=!1,S)};else{var w=(i?Be:fe)(()=>e[t]);w.f|=_r,g=()=>{var S=_(w);return S!==void 0&&(f=void 0),S===void 0?f:S}}if((r&Sn)===0)return g;if(c){var b=e.$$legacy;return function(S,k){return arguments.length>0?((!l||!k||b||u)&&c(k?g():S),S):g()}}var E=!1,p=!1,A=L(o),q=Be(()=>{var S=g(),k=_(A);return E?(E=!1,p=!0,k):(p=!1,A.v=S)});return a&&_(q),i||(q.equals=jt),function(S,k){if(ge!==null&&(E=p,g(),_(A)),arguments.length>0){const re=k?_(q):l&&a?me(S):S;if(!q.equals(re)){if(E=!0,T(A,re),h&&f!==void 0&&(f=re),en(q))return S;te(()=>_(q))}return S}return en(q)?q.v:_(q)}}const rr=1;var At=(e=>(e.FILTER_FIELD="__cascade-filter__field",e.TABLE_META="__cascade-filter__table-meta",e))(At||{});function Vl(e){const t=document.getElementById(e);if(!t)throw new Error(`The element with the "${e}" id was not found`);return t.textContent??""}function tn(e){const t=Vl(e);return JSON.parse(t)}class $l{constructor(t){P(this,"map");this.map=new Map(t.map(r=>[r.name,r]))}getField(t){const r=this.map.get(t);if(r)return r;throw new Error(`Unknown field: "${t}"`)}get fields(){return Array.from(this.map.values())}}var Gl=Object.defineProperty,Wl=(e,t,r)=>t in e?Gl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ql=(e,t,r)=>Wl(e,t+"",r);class ye{constructor(t=!1){Ql(this,"nullable"),this.nullable=t}deserialize(t){if(t===null){if(this.nullable)return null;throw new Error(`${this.constructor.name}: Null values are not allowed`)}return this._deserialize(t)}}var Yl=Object.defineProperty,Kl=(e,t,r)=>t in e?Yl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,nr=(e,t,r)=>Kl(e,typeof t!="symbol"?t+"":t,r);function rn(e,t=!1){return new Xl(e,t)}let Xl=class extends ye{constructor(t,r=!1){super(r),nr(this,"child"),this.child=t}_deserialize(t){if(!Array.isArray(t))throw new Error(`${this.constructor.name}: Unexpected type of value ${t}`);return t.map(r=>this.child.deserialize(r))}};function Jl(e,t){for(const[r,n]of Object.entries(e))if(n===t)return r;return null}function He(e,t=!1){return new Zl(e,t)}let Zl=class extends ye{constructor(t,r=!1){super(r),nr(this,"enumeration"),this.enumeration=t}_deserialize(t){let r=Jl(this.enumeration,t);if(r===null||typeof this.enumeration[r]=="function")throw new Error(`${this.constructor.name}: Unexpected enum value ${t}`);return this.enumeration[r]}};function ei(e=!1){return new ti(e)}class ti extends ye{_deserialize(t){if(typeof t!="number")throw new Error(`${this.constructor.name}: Unexpected type of value ${t}`);return t}}function nn(e,t=!1){return new ri(e,t)}class ri extends ye{constructor(t,r=!1){super(r),nr(this,"serializer"),this.serializer=t}_deserialize(t){return this.serializer.deserialize(t)}}function Je(e=!1){return new ni(e)}class ni extends ye{_deserialize(t){if(typeof t!="string")throw new Error(`${this.constructor.name}: Unexpected type of value ${t}`);return t}}function lr(e=!1){return new li(e)}class li extends ye{_deserialize(t){if(typeof t!="boolean")throw new Error(`${this.constructor.name}: Unexpected type of value ${t}`);return t}}function St(){return new ii}class ii extends ye{constructor(){super(!0)}_deserialize(t){return t}}var ai=Object.defineProperty,ui=(e,t,r)=>t in e?ai(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,si=(e,t,r)=>ui(e,t+"",r);function ln(e){return new oi(e)}class oi extends ye{constructor(t){super(!1),si(this,"_child"),this._child=t}_deserialize(t){if(t!==void 0)return this._child.deserialize(t)}}class Tt{serialize(t){const r={};for(const[n,i]of Object.entries(this.fields))if(i instanceof ln)Object.hasOwn(t,n)&&(r[n]=t[n]);else if(Object.hasOwn(t,n))r[n]=t[n];else throw new Error(`Value of field ${n} was missed`);return r}deserialize(t){const r={};for(const[n,i]of Object.entries(this.fields))try{r[n]=i.deserialize(t[n])}catch(l){throw new Error(`Field: ${n}; ${l.message}`)}return r}deserializeMany(t){if(!Array.isArray(t))throw new Error("Data is not array");return t.map(r=>this.deserialize(r))}}class an{serialize(t){throw new Error("Serialization is not implemented")}deserialize(t){const r={};for(const[n,i]of Object.entries(this.fields))try{r[n]=i.deserialize(t[n])}catch(l){throw new Error(`Field: ${n}; ${l.message}`)}return this.makeObject(...Array.from(Object.values(r)))}deserializeMany(t){if(!Array.isArray(t))throw new Error("Data is not array");return t.map(r=>this.deserialize(r))}}class fi extends Tt{constructor(){super(...arguments);P(this,"fields",{label:Je(),value:St()})}}var J=(e=>(e.DATE="date",e.CHOICE="choice",e.TEXT="text",e.NUMERIC="numeric",e.BOOLEAN="boolean",e.ARRAY="array",e))(J||{});class ci extends Tt{constructor(){super(...arguments);P(this,"fields",{label:Je(),name:Je(),nullable:lr(),type:He(J),choices:ln(rn(nn(new fi)))})}}function vi(e){const t=tn(e),n=new ci().deserializeMany(t);return new $l(n)}class di extends Tt{constructor(){super(...arguments);P(this,"fields",{filterEditorVersion:ei(),filter:St()})}}var Te=(e=>(e.SINGLE="single-filter",e.MULTI="multi-filter",e))(Te||{}),N=(e=>(e.EQUAL="==",e.NOT_EQUAL="!=",e.GREATER_THAN=">",e.LESS_THAN="<",e.GREATER_THAN_OR_EQUAL=">=",e.LESS_THAN_OR_EQUAL="<=",e.CONTAINS="contains",e.NOT_CONTAINS="not contains",e.IS="is",e.IS_NOT="is not",e.STARTS_WITH="starts with",e.ENDS_WITH="ends with",e.AND="and",e.OR="or",e))(N||{});class Ne{constructor(t,r,n,i,l){P(this,"type",Te.SINGLE);P(this,"enabled");P(this,"clause");P(this,"tableField");P(this,"value");P(this,"subtype");this.enabled=t,this.clause=r,this.tableField=n,this.value=i,this.subtype=l}}class _i extends Tt{constructor(){super(...arguments);P(this,"fields",{label:Je(),value:St()})}}class hi extends an{constructor(){super(...arguments);P(this,"fields",{type:He(Te),enabled:lr(),clause:He(N),tableField:Je(),value:nn(new _i),subtype:He(J)})}makeObject(r,n,i,l,a,s){return new Ne(n,i,l,a,s)}}class Nt{constructor(t,r,n){P(this,"type",Te.MULTI);P(this,"enabled");P(this,"clause");P(this,"subfilters");this.enabled=t,this.clause=r,this.subfilters=n}}class bi extends an{constructor(){super(...arguments);P(this,"fields",{type:He(Te),enabled:lr(),clause:He(N),subfilters:rn(St())})}makeObject(r,n,i,l){return new Nt(n,i,l)}}function un(e){switch(e.type){case Te.SINGLE:return new hi().deserialize(e);case Te.MULTI:const n=new bi().deserialize(e);return n.subfilters=n.subfilters.map(un),n;default:throw new Error(`Unknown filter type: ${e.type}`)}}function gi(e){let t;try{t=tn(e)}catch(n){console.error(n),console.warn("The default widget data will be used"),t=null}let r;return t?(r=new di().deserialize(t),r.filter&&(r.filter=un(r.filter))):r={filterEditorVersion:rr,filter:null},r}const ae=er(null),ir=er(null),Oe=er(!1);var pi=I('<input type="button" value="+ добавить фильтр" class="svelte-18leb9j">');function sn(e,t){let r=m(t,"onClick",8);var n=pi();ve("click",n,function(...i){var l;(l=r())==null||l.apply(this,i)}),O(e,n)}const ar=new Map([[N.EQUAL,"="],[N.NOT_EQUAL,"≠"],[N.GREATER_THAN,">"],[N.LESS_THAN,"<"],[N.GREATER_THAN_OR_EQUAL,"≥"],[N.LESS_THAN_OR_EQUAL,"≤"],[N.CONTAINS,"Содержит"],[N.NOT_CONTAINS,"Не содержит"],[N.IS,"Является"],[N.IS_NOT,"Не является"],[N.STARTS_WITH,"Начинается на"],[N.ENDS_WITH,"Заканчивается на"],[N.AND,"И"],[N.OR,"ИЛИ"]]);var wi=I('<div><div class="single-filter__main-content svelte-1ffugca"><input type="checkbox"> <div> </div> <div> </div> <div> </div></div> <button class="btn-delete svelte-1ffugca" type="button">&nbsp;×&nbsp;</button></div>');function on(e,t){B(t,!1);let r=m(t,"tableMeta",8),n=m(t,"filter",12),i=m(t,"onDelete",8);function l(w){const b=w.target;n(n().enabled=b.checked,!0),ae.update(E=>E)}X();var a=wi();let s;var u=x(a),o=x(u),d=F(o,2),c=x(d),f=F(d,2),v=x(f),h=F(f,2),y=x(h),g=F(u,2);ce((w,b,E)=>{s=Gr(a,1,"single-filter svelte-1ffugca",null,s,w),Wr(o,n().enabled),Se(c,b),Se(v,E),Se(y,n().value.label)},[()=>({disabled:!n().enabled}),()=>r().getField(n().tableField).label,()=>ar.get(n().clause)??n().clause],fe),ve("change",o,l),ve("click",g,function(...w){var b;(b=i())==null||b.apply(this,w)}),O(e,a),V()}var Ei=I('<div><div class="multi-filter__head svelte-w27rta"><input type="checkbox"> <div class="svelte-w27rta"> </div> <button class="btn-delete svelte-w27rta" type="button">&nbsp;×&nbsp;</button></div> <div class="multi-filter__body svelte-w27rta"><!> <!></div></div>');function fn(e,t){B(t,!1);let r=m(t,"tableMeta",8),n=m(t,"filter",12),i=m(t,"onDelete",8);function l(b){const E=b.target;n(n().enabled=E.checked,!0),ae.update(p=>p)}function a(){ir.set(n()),Oe.set(!0),ae.update(b=>b)}function s(b){n(n().subfilters=n().subfilters.filter((E,p)=>p!==b),!0),ae.update(E=>E)}X();var u=Ei();let o;var d=x(u),c=x(d),f=F(c,2),v=x(f),h=F(f,2),y=F(d,2),g=x(y);wt(g,1,()=>n().subfilters,Tl,(b,E,p)=>{var A=pt(),q=Q(A);{var Z=k=>{fn(k,{get tableMeta(){return r()},get filter(){return _(E)},onDelete:()=>s(p)})},S=(k,re)=>{{var xe=Ce=>{on(Ce,{get tableMeta(){return r()},get filter(){return _(E)},onDelete:()=>s(p)})};we(k,Ce=>{_(E)instanceof Ne&&Ce(xe)},re)}};we(q,k=>{_(E)instanceof Nt?k(Z):k(S,!1)})}O(b,A)});var w=F(g,2);sn(w,{onClick:a}),ce((b,E)=>{o=Gr(u,1,"multi-filter svelte-w27rta",null,o,b),Wr(c,n().enabled),Se(v,E)},[()=>({disabled:!n().enabled}),()=>ar.get(n().clause)??n().clause],fe),ve("change",c,l),ve("click",h,function(...b){var E;(E=i())==null||E.apply(this,b)}),O(e,u),V()}var yi=I('<span class="svelte-rveqii"></span>');function Ot(e,t){let r=m(t,"error",8),n=r()instanceof Error?String(r()):r();var i=yi();i.textContent=n,O(e,i)}function mi(e,t){B(t,!1);const[r,n]=ql(),i=()=>Hl(ae,"$filter",r);let l=m(t,"tableMeta",8);function a(){ir.set(null),Oe.set(!0)}function s(){ae.set(null)}X();var u=pt(),o=Q(u);{var d=f=>{sn(f,{onClick:a})},c=(f,v)=>{{var h=g=>{fn(g,{get tableMeta(){return l()},get filter(){return i()},onDelete:s})},y=(g,w)=>{{var b=p=>{on(p,{get tableMeta(){return l()},get filter(){return i()},onDelete:s})},E=p=>{Ot(p,{error:"Unknown filter type"})};we(g,p=>{i()instanceof Ne?p(b):p(E,!1)},w)}};we(f,g=>{i()instanceof Nt?g(h):g(y,!1)},v)}};we(o,f=>{i()===null?f(d):f(c,!1)})}O(e,u),V(),n()}var Ai=I('<dialog class="svelte-1cjh3t0"><header><!></header> <main><!></main> <footer><!></footer></dialog>');function Si(e,t){B(t,!1);let r=m(t,"isOpen",12,!1),n=m(t,"style",8,""),i=L();function l(){r(!1)}Bt(()=>(_(i),Ur(r())),()=>{_(i)&&(r()?_(i).showModal():_(i).close())}),Vt();var a=Ai(),s=x(a),u=x(s);Et(u,t,"header",{});var o=F(s,2),d=x(o);Et(d,t,"main",{});var c=F(o,2),f=x(c);Et(f,t,"footer",{}),yt(a,v=>T(i,v),()=>_(i)),ce(()=>Fl(a,n())),ve("close",a,l),O(e,a),V()}const xt=[N.EQUAL,N.NOT_EQUAL],cn=[N.GREATER_THAN,N.LESS_THAN,N.GREATER_THAN_OR_EQUAL,N.LESS_THAN_OR_EQUAL],vn=[N.CONTAINS,N.NOT_CONTAINS],Ti=[N.IS,N.IS_NOT],Ni=[N.STARTS_WITH,N.ENDS_WITH];var Oi=I('<div class="form-row"><div><!></div></div>');function qe(e,t){var r=Oi(),n=x(r),i=x(n);Et(i,t,"default",{}),O(e,r)}var xi=I('<label class="vCheckboxLabel svelte-prgwgy"><input type="checkbox"> Включен</label>'),Ci=I("<option> </option>"),Mi=I('<label class="svelte-prgwgy"><select></select> Выражение</label>'),Ii=I("<!> <!>",1);function Ze(e,t){B(t,!1);let r=m(t,"enabled",12,!1),n=m(t,"clause",12),i=m(t,"clauses",8);X();var l=Ii(),a=Q(l);qe(a,{children:(u,o)=>{var d=xi(),c=x(d);Dl(c,r),O(u,d)},$$slots:{default:!0}});var s=F(a,2);qe(s,{children:(u,o)=>{var d=Mi(),c=x(d);ce(()=>{n(),Pr(()=>{i()})}),wt(c,5,i,f=>f,(f,v,h,y)=>{var g=Ci(),w={},b=x(g);ce(E=>{w!==(w=_(v))&&(g.value=(g.__value=_(v))??""),Se(b,E)},[()=>ar.get(_(v))??_(v)],fe),O(f,g)}),Yr(c,n),O(u,d)},$$slots:{default:!0}}),O(e,l),V()}var Fi=I('<input type="button" value="Добавить фильтр" class="svelte-1fgf3s5">');function et(e,t){let r=m(t,"onClick",8);var n=Fi();ve("click",n,function(...i){var l;(l=r())==null||l.apply(this,i)}),O(e,n)}function Ri(...e){const t=[],r=[];for(const n of e)t.push(n.label),r.push(n.value);return{label:t.join(", "),value:r}}var Li=I("<option> </option>"),ki=I('<label class="svelte-prgwgy"><select required></select> Значение</label>'),Di=I("<!> <!> <!>",1);function ur(e,t){B(t,!1);let r=m(t,"tableFieldMeta",8),n=m(t,"choices",8),i=m(t,"clauses",8),l=m(t,"onAdd",8),a=m(t,"multiple",8,!0);function s(w){const b=w.target;if(a()){const E=[];for(const p of b.selectedOptions)E.push(n()[+p.value]);f=E}else f=n()[+b.value]}function u(){_(o).reportValidity()&&l()(new Ne(_(d),_(c),r().name,a()?Ri(...f):f,r().type))}let o=L(),d=L(!1),c=L(i()[0]),f=a()?[n()[0]]:n()[0];X();var v=Di(),h=Q(v);Ze(h,{get clauses(){return i()},get enabled(){return _(d)},set enabled(w){T(d,w)},get clause(){return _(c)},set clause(w){T(c,w)},$$legacy:!0});var y=F(h,2);qe(y,{children:(w,b)=>{var E=ki(),p=x(E);wt(p,7,n,A=>A.value,(A,q,Z)=>{var S=Li(),k={},re=x(S);ce(()=>{k!==(k=_(Z))&&(S.value=(S.__value=_(Z))??""),Se(re,_(q).label)}),O(A,S)}),yt(p,A=>T(o,A),()=>_(o)),ce(()=>p.multiple=a()),ve("change",p,s),O(w,E)},$$slots:{default:!0}});var g=F(y,2);et(g,{onClick:u}),O(e,v),V()}function Pi(e,t){let r=m(t,"tableFieldMeta",8),n=m(t,"choices",8),i=m(t,"onAdd",8);const l=fe(()=>[...vn]);ur(e,{get tableFieldMeta(){return r()},get choices(){return n()},get onAdd(){return i()},get clauses(){return _(l)}})}function Ui(e,t){let r=m(t,"tableFieldMeta",8),n=m(t,"choices",12),i=m(t,"onAdd",8);n([{value:!0,label:"Истина"},{value:!1,label:"Ложь"}]);const l=fe(()=>[...Ti]);ur(e,{get tableFieldMeta(){return r()},get choices(){return n()},get clauses(){return _(l)},get onAdd(){return i()},multiple:!1})}function zi(e,t){let r=m(t,"tableFieldMeta",8),n=m(t,"choices",8),i=m(t,"onAdd",8);const l=fe(()=>[...xt]);ur(e,{get tableFieldMeta(){return r()},get choices(){return n()},get clauses(){return _(l)},get onAdd(){return i()}})}var ji=I('<label class="svelte-prgwgy"><input type="date" required> Значение</label>'),Hi=I("<!> <!> <!>",1);function qi(e,t){B(t,!1);let r=m(t,"tableFieldMeta",8),n=m(t,"onAdd",8);m(t,"choices",8);function i(){_(a).reportValidity()&&n()(new Ne(_(s),_(u),r().name,{label:_(o),value:_(o)},J.DATE))}const l=[...xt,...cn];let a=L(),s=L(!1),u=L(l[0]),o=L();X();var d=Hi(),c=Q(d);Ze(c,{clauses:l,get enabled(){return _(s)},set enabled(h){T(s,h)},get clause(){return _(u)},set clause(h){T(u,h)},$$legacy:!0});var f=F(c,2);qe(f,{children:(h,y)=>{var g=ji(),w=x(g);yt(w,b=>T(a,b),()=>_(a)),Xt(w,()=>_(o),b=>T(o,b)),O(h,g)},$$slots:{default:!0}});var v=F(f,2);et(v,{onClick:i}),O(e,d),V()}var Bi=I('<label class="svelte-prgwgy"><input type="number" required> Значение</label>'),Vi=I("<!> <!> <!>",1);function $i(e,t){B(t,!1);let r=m(t,"tableFieldMeta",8),n=m(t,"onAdd",8);m(t,"choices",8);function i(){_(a).reportValidity()&&n()(new Ne(_(s),_(u),r().name,{label:""+_(o),value:_(o)},J.NUMERIC))}const l=[...xt,...cn];let a=L(),s=L(!1),u=L(l[0]),o=L();X();var d=Vi(),c=Q(d);Ze(c,{clauses:l,get enabled(){return _(s)},set enabled(h){T(s,h)},get clause(){return _(u)},set clause(h){T(u,h)},$$legacy:!0});var f=F(c,2);qe(f,{children:(h,y)=>{var g=Bi(),w=x(g);yt(w,b=>T(a,b),()=>_(a)),Xt(w,()=>_(o),b=>T(o,b)),O(h,g)},$$slots:{default:!0}});var v=F(f,2);et(v,{onClick:i}),O(e,d),V()}var Gi=I('<label class="svelte-prgwgy"><input type="text"> Значение</label>'),Wi=I("<!> <!> <!>",1);function Qi(e,t){B(t,!1);let r=m(t,"tableFieldMeta",8),n=m(t,"onAdd",8);m(t,"choices",8);function i(){n()(new Ne(_(a),_(s),r().name,{label:_(u),value:_(u)},J.TEXT))}const l=[...xt,...vn,...Ni];let a=L(!1),s=L(l[0]),u=L("");X();var o=Wi(),d=Q(o);Ze(d,{clauses:l,get enabled(){return _(a)},set enabled(v){T(a,v)},get clause(){return _(s)},set clause(v){T(s,v)},$$legacy:!0});var c=F(d,2);qe(c,{children:(v,h)=>{var y=Gi(),g=x(y);Xt(g,()=>_(u),w=>T(u,w)),O(v,y)},$$slots:{default:!0}});var f=F(c,2);et(f,{onClick:i}),O(e,o),V()}var Yi=I("<option> </option>"),Ki=I('<h2>Одиночный фильтр</h2> <div class="form-row"><div><label class="svelte-prgwgy"><select></select> Поле таблицы</label></div></div> <!>',1);function Xi(e,t){B(t,!1);let r=m(t,"tableMeta",8),n=m(t,"onAdd",8);const i=new Map([[J.ARRAY,Pi],[J.CHOICE,zi],[J.BOOLEAN,Ui],[J.DATE,qi],[J.NUMERIC,$i],[J.TEXT,Qi]]);let l=L(r().fields[0]),a=L(null);Bt(()=>_(l),()=>{const v=i.get(_(l).type)??null;T(a,v)}),Vt(),X();var s=Ki(),u=F(Q(s),2),o=x(u),d=x(o),c=x(d);ce(()=>{_(l),Pr(()=>{r()})}),wt(c,5,()=>r().fields,v=>v.name,(v,h)=>{var y=Yi(),g={},w=x(y);ce(()=>{g!==(g=_(h))&&(y.value=(y.__value=_(h))??""),Se(w,_(h).label)}),O(v,y)});var f=F(u,2);Sl(f,()=>_(a),v=>{var h=pt(),y=Q(h);{var g=b=>{const E=fe(()=>_(l).choices??[]);_(a)(b,{get tableFieldMeta(){return _(l)},get choices(){return _(E)},get onAdd(){return n()}})},w=b=>{Ot(b,{error:"Столбец этого типа не поддерживается"})};we(y,b=>{_(a)?b(g):b(w,!1)})}O(v,h)}),Yr(c,()=>_(l),v=>T(l,v)),O(e,s),V()}var Ji=I("<h2>Множественный фильтр</h2> <!> <!>",1);function Zi(e,t){B(t,!1);let r=m(t,"onAdd",8);function n(){r()(new Nt(_(l),_(a),[]))}const i=[N.AND,N.OR];let l=L(),a=L();X();var s=Ji(),u=F(Q(s),2);Ze(u,{clauses:i,get enabled(){return _(l)},set enabled(d){T(l,d)},get clause(){return _(a)},set clause(d){T(a,d)},$$legacy:!0});var o=F(u,2);et(o,{onClick:n}),O(e,s),V()}var ea=I('<div class="dialog__header svelte-ux1d7j" slot="header"><button class="btn-close svelte-ux1d7j" type="button">×</button> <h2>Добавить фильтр</h2></div>'),ta=I('<div class="dialog__body svelte-ux1d7j" slot="main"><!> <hr class="svelte-ux1d7j"> <!></div>');function ra(e,t){B(t,!1);let r=m(t,"tableMeta",8);function n(a){const s=Zr(ir);s?(s.subfilters.push(a),ae.update(u=>u)):ae.set(a),Oe.set(!1)}function i(){Oe.set(!1)}let l=L(!1);zl(()=>{Oe.subscribe(a=>{T(l,a)})}),Bt(()=>(_(l),Oe),()=>{_(l)||Oe.set(_(l))}),Vt(),X(),Si(e,{style:"background-color: #fefefe; margin: 5% auto; border: 1px solid #888; width: 40%; padding: 0;",get isOpen(){return _(l)},set isOpen(a){T(l,a)},$$slots:{header:(a,s)=>{var u=ea(),o=x(u);ve("click",o,i),O(a,u)},main:(a,s)=>{var u=ta(),o=x(u);Xi(o,{get tableMeta(){return r()},onAdd:n});var d=F(o,4);Zi(d,{onAdd:n}),O(a,u)}},$$legacy:!0}),V()}function na(e,t){const r=document.getElementById(t);if(!r)throw new Error(`The element with id "${t}" was not found`);const n={filter:e,filterEditorVersion:rr};r.textContent=JSON.stringify(n)}var la=I("<!> <!>",1);function ia(e,t){B(t,!1);const r=vi(At.TABLE_META),n=gi(At.FILTER_FIELD);ae.set(n.filter),ae.subscribe(u=>{na(u,At.FILTER_FIELD)}),X();var i=pt(),l=Q(i);{var a=u=>{Ot(u,{error:"Version of filter is greater than editor version"})},s=(u,o)=>{{var d=f=>{Ot(f,{error:"There are no fields in the table meta"})},c=f=>{var v=la(),h=Q(v);mi(h,{tableMeta:r});var y=F(h,2);ra(y,{tableMeta:r}),O(f,v)};we(u,f=>{r.fields.length===0?f(d):f(c,!1)},o)}};we(l,u=>{n.filterEditorVersion>rr?u(a):u(s,!1)})}O(e,i),V()}return yl(ia,{target:document.getElementById("__cascade-filter__editor")})});
