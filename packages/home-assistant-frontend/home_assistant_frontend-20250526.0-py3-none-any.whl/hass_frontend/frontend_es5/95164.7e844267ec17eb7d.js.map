{"version":3,"file":"95164.7e844267ec17eb7d.js","sources":["https://raw.githubusercontent.com/home-assistant/frontend/20250526.0/src/common/decorators/storage.ts","https://raw.githubusercontent.com/home-assistant/frontend/20250526.0/src/panels/lovelace/cards/energy/hui-energy-devices-detail-graph-card.ts"],"names":["StorageClass","addFromStorage","storageKey","this","_storage","data","storage","getItem","JSON","parse","subscribeChanges","callback","_listeners","push","unsubscribeChanges","index","indexOf","splice","hasKey","getValue","setValue","value","oldValue","undefined","removeItem","setItem","stringify","_err","forEach","listener","constructor","store","window","localStorage","addEventListener","ev","key","newValue","storages","options","proto","propertyKey","Error","storageName","storageInstance","String","subscribe","el","_newValue","requestUpdate","deserializer","state","serializer","performUpdate","__initialized","call","connectedCallback","disconnectedCallback","__unbsubLocalStorage","_el$__unbsubLocalStor","descriptor","Object","getOwnPropertyDescriptor","newDescriptor","get","set","configurable","enumerable","oldSetter","assign","defineProperty","UNIT","HuiEnergyDevicesDetailGraphCard","SubscribeMixin","LitElement","hassSubscribe","_this$_config","getEnergyDataCollection","hass","_config","collection_key","_data","_processStatistics","getCardSize","setConfig","config","shouldUpdate","changedProps","hasConfigChanged","size","has","willUpdate","render","html","_t","_","title","_t2","classMap","_chartData","_createOptions","_start","_end","locale","_compareStart","_compareEnd","_datasetHidden","_datasetUnhidden","nothing","_hiddenStats","detail","name","filter","stat","energyData","start","end","endOfToday","startCompare","endCompare","stats","compareData","statsCompare","computedStyle","getComputedStyle","devices","prefs","device_consumption","childMap","d","included_in_stat","stat_consumption","growthValues","device","calculateStatisticSumGrowth","growthValuesExChildren","reduce","acc","child","sorted_devices","map","sort","a","b","datasets","summedData","compareSummedData","getSummedData","showUntracked","consumption","consumptionData","compareConsumption","consumptionCompareData","computeConsumptionData","processedCompareData","_processDataSet","statsMetadata","untrackedCompareData","_processUntracked","id","type","stack","processedData","untrackedData","fillDataGapsAndRoundCaps","compare","totalDeviceConsumption","datapoint","compareTransform","getCompareTransform","untrackedConsumption","keys","used_total","Number","time","ts","dataPoint","Date","getTime","order","now","cursor","localize","itemStyle","borderColor","getEnergyColor","themes","darkMode","barMaxWidth","color","statistics","statisticsMetaData","source","idx","_this$_config2","max_devices","console","warn","getGraphColorByIndex","prevStart","point","change","sumChildren","c","_cStats$find","cStats","find","cStat","getStatisticLabel","_getStatIdFromId","Boolean","replace","args","startOfToday","hassSubscribeRequiredHostProps","_formatTotal","total","num","formatNumber","unit","memoizeOne","compareStart","compareEnd","commonOptions","getCommonOptions","legend","show","selected","grid","top","bottom","left","right","containLabel","styles","css","_t3","attribute"],"mappings":"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"}