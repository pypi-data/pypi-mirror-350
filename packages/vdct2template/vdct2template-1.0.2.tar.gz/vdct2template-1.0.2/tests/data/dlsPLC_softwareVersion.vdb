#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("../../dbd/dlsPLC_vdct.dbd")
#! DBDEND

# % macro, __doc__, Template that reads software version from a PLC. 
# % macro, device, Device prefix
record(subArray, "$(device):INPSOFT") {
  field(DESC, "Software version")
  field(FLNK, "$(device):CALSRVC")
  field(FTVL, "USHORT")
  field(INP, "$(device):DM0XX MS CP")
  field(MALM, "100")
  field(INDX, "1")
}

record(calc, "$(device):CALSRVC") {
  field(CALC, "(((A>>8)=67)||(A=25345))?1:0")
  field(INPA, "$(device):INPSOFT.VAL MS")
  field(FLNK, "$(device):SRVC")
}

# SR Valve Controller
#% archiver 10 Monitor
#% controldesk SR Valve smon
#
record(bi, "$(device):SRVC") {
  field(DESC, "SR Valve Controller")
  field(INP, "$(device):CALSRVC MS")
  field(PHAS, "1")
  field(ZNAM, "No")
  field(ONAM, "Yes")
}

record(longin, "$(device):SOFTWARE") {
  field(DESC, "Software version")
  field(DTYP, "Soft Channel")
  field(INP, "$(device):INPSOFT CP MS")
}

#! Further lines contain data used by VisualDCT
#! View(2000,2115,1.0)
#! Record("$(device):INPSOFT",2300,2140,0,1,"$(device):INPSOFT")
#! Field("$(device):INPSOFT.FLNK",16777215,1,"$(device):INPSOFT.FLNK")
#! Link("$(device):INPSOFT.FLNK","$(device):CALSRVC")
#! Field("$(device):INPSOFT.INP",16777215,1,"$(device):INPSOFT.INP")
#! Field("$(device):INPSOFT.VAL",16777215,1,"$(device):INPSOFT.VAL")
#! Record("$(device):SOFTWARE",2020,2222,0,1,"$(device):SOFTWARE")
#! Field("$(device):SOFTWARE.INP",16777215,1,"$(device):SOFTWARE.INP")
#! Link("$(device):SOFTWARE.INP","$(device):INPSOFT.VAL")
#! Record("$(device):CALSRVC",2580,2222,0,0,"$(device):CALSRVC")
#! Field("$(device):CALSRVC.INPA",16777215,0,"$(device):CALSRVC.INPA")
#! Link("$(device):CALSRVC.INPA","$(device):INPSOFT.VAL")
#! Field("$(device):CALSRVC.FLNK",16777215,1,"$(device):CALSRVC.FLNK")
#! Link("$(device):CALSRVC.FLNK","$(device):SRVC")
#! Field("$(device):CALSRVC.VAL",16777215,1,"$(device):CALSRVC.VAL")
#! Record("$(device):SRVC",2880,2234,0,0,"$(device):SRVC")
#! Field("$(device):SRVC.INP",16777215,0,"$(device):SRVC.INP")
#! Link("$(device):SRVC.INP","$(device):CALSRVC.VAL")
