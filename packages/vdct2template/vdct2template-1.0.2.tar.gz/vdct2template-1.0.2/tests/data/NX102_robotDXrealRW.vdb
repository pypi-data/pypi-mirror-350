#! Generated by VisualDCT v2.7.1-SNAPSHOT
#! DBDSTART
#! DBD("../../dbd/dlsPLC_vdct.dbd")
#! DBDEND


# NX102_robotDXrealRW.template

#% macro, __doc__, Template database for reading and writing a real value for a DX200 controller variable through NX102 PLC
#% macro, name, Object name and gui association name
#% macro, device, PV prefix
#% macro, variable, PV suffix (its associated _RBV will be autogenerated).
#% macro, desc, Description
#% macro, port, port name of ether_ip driver
#% macro, tagread, tag name of ether_ip read value
#% macro, tagwrite, tag name of ether_ip write value
#% macro, readscan, value update time for readback value 
#% macro, writescan, value for Ethernet/IP update time - use value without "seconds", e.g. 0.5
#% macro, egu, Engineering units
#% macro, prec, precision for reporting value back
#% macro, drvl, Lowest accepted value
#% macro, drvh, Highest accepted value

# This associates an edm screen with the template
# % gui, $(name=), edm, NX102_robotDXrealRW.edl, device=$(device)$(variable)
# % gui, $(name=), edmembed, NX102_robotDXrealRW-embed.edl, device=$(device)$(variable),label=$(desc=)
# This associates a BOY screen with the template
include "NX102_robotDXrealRW_detail.template"

record(ao, "$(device)$(variable)") {
  field(DESC, "Set value $(desc=)")
  field(DTYP, "EtherIP")
  #SCAN must be Passive, otherwise the changes on the GUI aren't picked sometimes
  field(SCAN, "Passive")
  field(PREC, "$(prec=2)")
  field(DRVH, "$(drvh)")
  field(DRVL, "$(drvl)")
  #Scan rate has to be set with S flag when SCAN does not specify a fixed-value scan rate (see ether_ipApp/doc/readme.txt)
  field(OUT, "@$(port) $(tagwrite) S $(writescan=0.5)")
}

record(ai, "$(device)$(variable)_RBV") {
  field(DESC, "Get value $(desc=)")
  field(DTYP, "EtherIP")
  field(SCAN, "$(readscan=1 second)")
  field(EGU, "$(egu=)")
  field(PREC, "$(prec=2)")
  field(INP, "@$(port) $(tagread)")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("$(device)$(variable)",260,20,0,0,"$(device)$(variable)")
#! Record("$(device)$(variable)_RBV",20,28,0,1,"$(device)$(variable)_RBV")
#! Field("$(device)$(variable)_RBV.INP",16777215,1,"$(device)$(variable)_RBV.INP")
