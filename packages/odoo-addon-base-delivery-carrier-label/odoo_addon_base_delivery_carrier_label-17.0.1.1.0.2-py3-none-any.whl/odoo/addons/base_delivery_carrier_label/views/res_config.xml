<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <menuitem
        id="menu_carriers_config"
        name="Carriers"
        parent="stock.menu_stock_config_settings"
        sequence="20"
    />
    <!-- After installation of the modules, open the delivery method menu -->
    <!-- call this action from your own carrier module -->
    <record
        id="action_delivery_method_from_carrier_module_install"
        model="ir.actions.client"
    >
        <field name="name">Open Delivery Methods Menu</field>
        <field name="tag">reload</field>
        <field
            name="params"
            eval="{'menu_id': ref('delivery.action_delivery_carrier_form')}"
        />
    </record>

    <record
        id="res_config_settings_view_form_inherit_delivery_carrier_label"
        model="ir.ui.view"
    >
        <field
            name="name"
        >res.config.settings.view.form.inherit.delivery.carrier.label</field>
        <field name="model">res.config.settings</field>
        <field name="inherit_id" ref="stock.res_config_settings_view_form" />
        <field name="arch" type="xml">
            <xpath expr="//block[@name='shipping_setting_container']" position="inside">
                <setting
                    id="delivery_set_default_package"
                    help="Automatically assign a single package before shipping"
                    title="When sending a picking to the carrier, this option ensures all items are grouped into one package if none exist. This helps shipping connectors that require at least one package for label generation or tracking. If no packages are assigned, the system will group all items into a single package before shipping."
                >
                    <field name="delivery_set_default_package" />
                </setting>
            </xpath>
        </field>
    </record>
</odoo>
