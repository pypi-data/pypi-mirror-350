[global]
  runner       = "linux"
  detached     = "false"
  timeout      = "1 minutes"
  retries      = "0"
  on_failure   = "stop pipeline"
  on_input_err = "fail"


[[pipelines]]
name = "main"

  [[pipelines.jobs]]
  name       = "Step 1"
  script     = "./pipeforge/examples/scripts/get_purpose_in_life.py"

    [pipelines.jobs.input]
    my_name = "Peter Woodstock"
    my_path = "${PIPEFORGE__PATH}"

    [pipelines.jobs.output]
    my_purpose_in_life = "?"


  [[pipelines.jobs]]
  name       = "Step 2-A"
  script     = "./pipeforge/examples/scripts/repeat_purpose.py"

    [pipelines.jobs.input]
    purpose_in_life = "@{Step 1::my_purpose_in_life}"
    repeat          = "5"

    [pipelines.jobs.output]
    satisfied = "?"


  [[pipelines.jobs]]
  name       = "Step 2-B"
  script     = "./pipeforge/examples/scripts/repeat_purpose.py"

    [pipelines.jobs.input]
    purpose_in_life = "@{Step 1::my_purpose_in_life}"
    repeat          = "15"

    [pipelines.jobs.output]
    satisfied = "?"


  [[pipelines.jobs]]
  name       = "Step 3"
  script     = "./pipeforge/examples/scripts/print_summary.py"
  on_failure = "trigger pipeline : secondary"

    [pipelines.jobs.input]
    satisfaction_1 = "@{Step 2-A::satisfied}"
    satisfaction_2 = "@{Step 2-B::satisfied}"


[[pipelines]]
name = "secondary"

  [[pipelines.jobs]]
  name       = "Step 1"
  script     = "./pipeforge/examples/scripts/get_purpose_in_life.py"

    [pipelines.jobs.input]
    my_name = "John Rambo"
    my_path = "${PIPEFORGE__PATH}"

    [pipelines.jobs.output]
    my_purpose_in_life = "?"


  [[pipelines.jobs]]
  name       = "Step 2"
  script     = "./pipeforge/examples/scripts/repeat_purpose.py"

    [pipelines.jobs.input]
    purpose_in_life = "@{Step 1::my_purpose_in_life}"
    repeat          = "20"

    [pipelines.jobs.output]
    satisfied = "?"


  [[pipelines.jobs]]
  name       = "Step 3"
  script     = "./pipeforge/examples/scripts/print_summary.py"

    [pipelines.jobs.input]
    satisfaction_1 = "@{Step 2::satisfied}"
    satisfaction_2 = "<undefined>"

